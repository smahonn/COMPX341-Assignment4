{"ast":null,"code":"/* eslint guard-for-in:0 */\nvar AWS;\n/**\r\n * A set of utility methods for use with the AWS SDK.\r\n *\r\n * @!attribute abort\r\n *   Return this value from an iterator function {each} or {arrayEach}\r\n *   to break out of the iteration.\r\n *   @example Breaking out of an iterator function\r\n *     AWS.util.each({a: 1, b: 2, c: 3}, function(key, value) {\r\n *       if (key == 'b') return AWS.util.abort;\r\n *     });\r\n *   @see each\r\n *   @see arrayEach\r\n * @api private\r\n */\n\nvar util = {\n  environment: 'nodejs',\n  engine: function engine() {\n    if (util.isBrowser() && typeof navigator !== 'undefined') {\n      return navigator.userAgent;\n    } else {\n      var engine = process.platform + '/' + process.version;\n\n      if (process.env.AWS_EXECUTION_ENV) {\n        engine += ' exec-env/' + process.env.AWS_EXECUTION_ENV;\n      }\n\n      return engine;\n    }\n  },\n  userAgent: function userAgent() {\n    var name = util.environment;\n\n    var agent = 'aws-sdk-' + name + '/' + require('./core').VERSION;\n\n    if (name === 'nodejs') agent += ' ' + util.engine();\n    return agent;\n  },\n  uriEscape: function uriEscape(string) {\n    var output = encodeURIComponent(string);\n    output = output.replace(/[^A-Za-z0-9_.~\\-%]+/g, escape); // AWS percent-encodes some extra non-standard characters in a URI\n\n    output = output.replace(/[*]/g, function (ch) {\n      return '%' + ch.charCodeAt(0).toString(16).toUpperCase();\n    });\n    return output;\n  },\n  uriEscapePath: function uriEscapePath(string) {\n    var parts = [];\n    util.arrayEach(string.split('/'), function (part) {\n      parts.push(util.uriEscape(part));\n    });\n    return parts.join('/');\n  },\n  urlParse: function urlParse(url) {\n    return util.url.parse(url);\n  },\n  urlFormat: function urlFormat(url) {\n    return util.url.format(url);\n  },\n  queryStringParse: function queryStringParse(qs) {\n    return util.querystring.parse(qs);\n  },\n  queryParamsToString: function queryParamsToString(params) {\n    var items = [];\n    var escape = util.uriEscape;\n    var sortedKeys = Object.keys(params).sort();\n    util.arrayEach(sortedKeys, function (name) {\n      var value = params[name];\n      var ename = escape(name);\n      var result = ename + '=';\n\n      if (Array.isArray(value)) {\n        var vals = [];\n        util.arrayEach(value, function (item) {\n          vals.push(escape(item));\n        });\n        result = ename + '=' + vals.sort().join('&' + ename + '=');\n      } else if (value !== undefined && value !== null) {\n        result = ename + '=' + escape(value);\n      }\n\n      items.push(result);\n    });\n    return items.join('&');\n  },\n  readFileSync: function readFileSync(path) {\n    if (util.isBrowser()) return null;\n    return require('fs').readFileSync(path, 'utf-8');\n  },\n  base64: {\n    encode: function encode64(string) {\n      if (typeof string === 'number') {\n        throw util.error(new Error('Cannot base64 encode number ' + string));\n      }\n\n      if (string === null || typeof string === 'undefined') {\n        return string;\n      }\n\n      var buf = util.buffer.toBuffer(string);\n      return buf.toString('base64');\n    },\n    decode: function decode64(string) {\n      if (typeof string === 'number') {\n        throw util.error(new Error('Cannot base64 decode number ' + string));\n      }\n\n      if (string === null || typeof string === 'undefined') {\n        return string;\n      }\n\n      return util.buffer.toBuffer(string, 'base64');\n    }\n  },\n  buffer: {\n    /**\r\n     * Buffer constructor for Node buffer and buffer pollyfill\r\n     */\n    toBuffer: function toBuffer(data, encoding) {\n      return typeof util.Buffer.from === 'function' && util.Buffer.from !== Uint8Array.from ? util.Buffer.from(data, encoding) : new util.Buffer(data, encoding);\n    },\n    alloc: function alloc(size, fill, encoding) {\n      if (typeof size !== 'number') {\n        throw new Error('size passed to alloc must be a number.');\n      }\n\n      if (typeof util.Buffer.alloc === 'function') {\n        return util.Buffer.alloc(size, fill, encoding);\n      } else {\n        var buf = new util.Buffer(size);\n\n        if (fill !== undefined && typeof buf.fill === 'function') {\n          buf.fill(fill, undefined, undefined, encoding);\n        }\n\n        return buf;\n      }\n    },\n    toStream: function toStream(buffer) {\n      if (!util.Buffer.isBuffer(buffer)) buffer = util.buffer.toBuffer(buffer);\n      var readable = new util.stream.Readable();\n      var pos = 0;\n\n      readable._read = function (size) {\n        if (pos >= buffer.length) return readable.push(null);\n        var end = pos + size;\n        if (end > buffer.length) end = buffer.length;\n        readable.push(buffer.slice(pos, end));\n        pos = end;\n      };\n\n      return readable;\n    },\n\n    /**\r\n     * Concatenates a list of Buffer objects.\r\n     */\n    concat: function concat(buffers) {\n      var length = 0,\n          offset = 0,\n          buffer = null,\n          i;\n\n      for (i = 0; i < buffers.length; i++) {\n        length += buffers[i].length;\n      }\n\n      buffer = util.buffer.alloc(length);\n\n      for (i = 0; i < buffers.length; i++) {\n        buffers[i].copy(buffer, offset);\n        offset += buffers[i].length;\n      }\n\n      return buffer;\n    }\n  },\n  string: {\n    byteLength: function byteLength(string) {\n      if (string === null || string === undefined) return 0;\n      if (typeof string === 'string') string = util.buffer.toBuffer(string);\n\n      if (typeof string.byteLength === 'number') {\n        return string.byteLength;\n      } else if (typeof string.length === 'number') {\n        return string.length;\n      } else if (typeof string.size === 'number') {\n        return string.size;\n      } else if (typeof string.path === 'string') {\n        return require('fs').lstatSync(string.path).size;\n      } else {\n        throw util.error(new Error('Cannot determine length of ' + string), {\n          object: string\n        });\n      }\n    },\n    upperFirst: function upperFirst(string) {\n      return string[0].toUpperCase() + string.substr(1);\n    },\n    lowerFirst: function lowerFirst(string) {\n      return string[0].toLowerCase() + string.substr(1);\n    }\n  },\n  ini: {\n    parse: function string(ini) {\n      var currentSection,\n          map = {};\n      util.arrayEach(ini.split(/\\r?\\n/), function (line) {\n        line = line.split(/(^|\\s)[;#]/)[0]; // remove comments\n\n        var section = line.match(/^\\s*\\[([^\\[\\]]+)\\]\\s*$/);\n\n        if (section) {\n          currentSection = section[1];\n        } else if (currentSection) {\n          var item = line.match(/^\\s*(.+?)\\s*=\\s*(.+?)\\s*$/);\n\n          if (item) {\n            map[currentSection] = map[currentSection] || {};\n            map[currentSection][item[1]] = item[2];\n          }\n        }\n      });\n      return map;\n    }\n  },\n  fn: {\n    noop: function noop() {},\n    callback: function callback(err) {\n      if (err) throw err;\n    },\n\n    /**\r\n     * Turn a synchronous function into as \"async\" function by making it call\r\n     * a callback. The underlying function is called with all but the last argument,\r\n     * which is treated as the callback. The callback is passed passed a first argument\r\n     * of null on success to mimick standard node callbacks.\r\n     */\n    makeAsync: function makeAsync(fn, expectedArgs) {\n      if (expectedArgs && expectedArgs <= fn.length) {\n        return fn;\n      }\n\n      return function () {\n        var args = Array.prototype.slice.call(arguments, 0);\n        var callback = args.pop();\n        var result = fn.apply(null, args);\n        callback(result);\n      };\n    }\n  },\n\n  /**\r\n   * Date and time utility functions.\r\n   */\n  date: {\n    /**\r\n     * @return [Date] the current JavaScript date object. Since all\r\n     *   AWS services rely on this date object, you can override\r\n     *   this function to provide a special time value to AWS service\r\n     *   requests.\r\n     */\n    getDate: function getDate() {\n      if (!AWS) AWS = require('./core');\n\n      if (AWS.config.systemClockOffset) {\n        // use offset when non-zero\n        return new Date(new Date().getTime() + AWS.config.systemClockOffset);\n      } else {\n        return new Date();\n      }\n    },\n\n    /**\r\n     * @return [String] the date in ISO-8601 format\r\n     */\n    iso8601: function iso8601(date) {\n      if (date === undefined) {\n        date = util.date.getDate();\n      }\n\n      return date.toISOString().replace(/\\.\\d{3}Z$/, 'Z');\n    },\n\n    /**\r\n     * @return [String] the date in RFC 822 format\r\n     */\n    rfc822: function rfc822(date) {\n      if (date === undefined) {\n        date = util.date.getDate();\n      }\n\n      return date.toUTCString();\n    },\n\n    /**\r\n     * @return [Integer] the UNIX timestamp value for the current time\r\n     */\n    unixTimestamp: function unixTimestamp(date) {\n      if (date === undefined) {\n        date = util.date.getDate();\n      }\n\n      return date.getTime() / 1000;\n    },\n\n    /**\r\n     * @param [String,number,Date] date\r\n     * @return [Date]\r\n     */\n    from: function format(date) {\n      if (typeof date === 'number') {\n        return new Date(date * 1000); // unix timestamp\n      } else {\n        return new Date(date);\n      }\n    },\n\n    /**\r\n     * Given a Date or date-like value, this function formats the\r\n     * date into a string of the requested value.\r\n     * @param [String,number,Date] date\r\n     * @param [String] formatter Valid formats are:\r\n     #   * 'iso8601'\r\n     #   * 'rfc822'\r\n     #   * 'unixTimestamp'\r\n     * @return [String]\r\n     */\n    format: function format(date, formatter) {\n      if (!formatter) formatter = 'iso8601';\n      return util.date[formatter](util.date.from(date));\n    },\n    parseTimestamp: function parseTimestamp(value) {\n      if (typeof value === 'number') {\n        // unix timestamp (number)\n        return new Date(value * 1000);\n      } else if (value.match(/^\\d+$/)) {\n        // unix timestamp\n        return new Date(value * 1000);\n      } else if (value.match(/^\\d{4}/)) {\n        // iso8601\n        return new Date(value);\n      } else if (value.match(/^\\w{3},/)) {\n        // rfc822\n        return new Date(value);\n      } else {\n        throw util.error(new Error('unhandled timestamp format: ' + value), {\n          code: 'TimestampParserError'\n        });\n      }\n    }\n  },\n  crypto: {\n    crc32Table: [0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA, 0x076DC419, 0x706AF48F, 0xE963A535, 0x9E6495A3, 0x0EDB8832, 0x79DCB8A4, 0xE0D5E91E, 0x97D2D988, 0x09B64C2B, 0x7EB17CBD, 0xE7B82D07, 0x90BF1D91, 0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE, 0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7, 0x136C9856, 0x646BA8C0, 0xFD62F97A, 0x8A65C9EC, 0x14015C4F, 0x63066CD9, 0xFA0F3D63, 0x8D080DF5, 0x3B6E20C8, 0x4C69105E, 0xD56041E4, 0xA2677172, 0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B, 0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940, 0x32D86CE3, 0x45DF5C75, 0xDCD60DCF, 0xABD13D59, 0x26D930AC, 0x51DE003A, 0xC8D75180, 0xBFD06116, 0x21B4F4B5, 0x56B3C423, 0xCFBA9599, 0xB8BDA50F, 0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924, 0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D, 0x76DC4190, 0x01DB7106, 0x98D220BC, 0xEFD5102A, 0x71B18589, 0x06B6B51F, 0x9FBFE4A5, 0xE8B8D433, 0x7807C9A2, 0x0F00F934, 0x9609A88E, 0xE10E9818, 0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01, 0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E, 0x6C0695ED, 0x1B01A57B, 0x8208F4C1, 0xF50FC457, 0x65B0D9C6, 0x12B7E950, 0x8BBEB8EA, 0xFCB9887C, 0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3, 0xFBD44C65, 0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2, 0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB, 0x4369E96A, 0x346ED9FC, 0xAD678846, 0xDA60B8D0, 0x44042D73, 0x33031DE5, 0xAA0A4C5F, 0xDD0D7CC9, 0x5005713C, 0x270241AA, 0xBE0B1010, 0xC90C2086, 0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F, 0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4, 0x59B33D17, 0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD, 0xEDB88320, 0x9ABFB3B6, 0x03B6E20C, 0x74B1D29A, 0xEAD54739, 0x9DD277AF, 0x04DB2615, 0x73DC1683, 0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8, 0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1, 0xF00F9344, 0x8708A3D2, 0x1E01F268, 0x6906C2FE, 0xF762575D, 0x806567CB, 0x196C3671, 0x6E6B06E7, 0xFED41B76, 0x89D32BE0, 0x10DA7A5A, 0x67DD4ACC, 0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5, 0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252, 0xD1BB67F1, 0xA6BC5767, 0x3FB506DD, 0x48B2364B, 0xD80D2BDA, 0xAF0A1B4C, 0x36034AF6, 0x41047A60, 0xDF60EFC3, 0xA867DF55, 0x316E8EEF, 0x4669BE79, 0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236, 0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F, 0xC5BA3BBE, 0xB2BD0B28, 0x2BB45A92, 0x5CB36A04, 0xC2D7FFA7, 0xB5D0CF31, 0x2CD99E8B, 0x5BDEAE1D, 0x9B64C2B0, 0xEC63F226, 0x756AA39C, 0x026D930A, 0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713, 0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38, 0x92D28E9B, 0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21, 0x86D3D2D4, 0xF1D4E242, 0x68DDB3F8, 0x1FDA836E, 0x81BE16CD, 0xF6B9265B, 0x6FB077E1, 0x18B74777, 0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C, 0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45, 0xA00AE278, 0xD70DD2EE, 0x4E048354, 0x3903B3C2, 0xA7672661, 0xD06016F7, 0x4969474D, 0x3E6E77DB, 0xAED16A4A, 0xD9D65ADC, 0x40DF0B66, 0x37D83BF0, 0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9, 0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6, 0xBAD03605, 0xCDD70693, 0x54DE5729, 0x23D967BF, 0xB3667A2E, 0xC4614AB8, 0x5D681B02, 0x2A6F2B94, 0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B, 0x2D02EF8D],\n    crc32: function crc32(data) {\n      var tbl = util.crypto.crc32Table;\n      var crc = 0 ^ -1;\n\n      if (typeof data === 'string') {\n        data = util.buffer.toBuffer(data);\n      }\n\n      for (var i = 0; i < data.length; i++) {\n        var code = data.readUInt8(i);\n        crc = crc >>> 8 ^ tbl[(crc ^ code) & 0xFF];\n      }\n\n      return (crc ^ -1) >>> 0;\n    },\n    hmac: function hmac(key, string, digest, fn) {\n      if (!digest) digest = 'binary';\n\n      if (digest === 'buffer') {\n        digest = undefined;\n      }\n\n      if (!fn) fn = 'sha256';\n      if (typeof string === 'string') string = util.buffer.toBuffer(string);\n      return util.crypto.lib.createHmac(fn, key).update(string).digest(digest);\n    },\n    md5: function md5(data, digest, callback) {\n      return util.crypto.hash('md5', data, digest, callback);\n    },\n    sha256: function sha256(data, digest, callback) {\n      return util.crypto.hash('sha256', data, digest, callback);\n    },\n    hash: function hash(algorithm, data, digest, callback) {\n      var hash = util.crypto.createHash(algorithm);\n\n      if (!digest) {\n        digest = 'binary';\n      }\n\n      if (digest === 'buffer') {\n        digest = undefined;\n      }\n\n      if (typeof data === 'string') data = util.buffer.toBuffer(data);\n      var sliceFn = util.arraySliceFn(data);\n      var isBuffer = util.Buffer.isBuffer(data); //Identifying objects with an ArrayBuffer as buffers\n\n      if (util.isBrowser() && typeof ArrayBuffer !== 'undefined' && data && data.buffer instanceof ArrayBuffer) isBuffer = true;\n\n      if (callback && typeof data === 'object' && typeof data.on === 'function' && !isBuffer) {\n        data.on('data', function (chunk) {\n          hash.update(chunk);\n        });\n        data.on('error', function (err) {\n          callback(err);\n        });\n        data.on('end', function () {\n          callback(null, hash.digest(digest));\n        });\n      } else if (callback && sliceFn && !isBuffer && typeof FileReader !== 'undefined') {\n        // this might be a File/Blob\n        var index = 0,\n            size = 1024 * 512;\n        var reader = new FileReader();\n\n        reader.onerror = function () {\n          callback(new Error('Failed to read data.'));\n        };\n\n        reader.onload = function () {\n          var buf = new util.Buffer(new Uint8Array(reader.result));\n          hash.update(buf);\n          index += buf.length;\n\n          reader._continueReading();\n        };\n\n        reader._continueReading = function () {\n          if (index >= data.size) {\n            callback(null, hash.digest(digest));\n            return;\n          }\n\n          var back = index + size;\n          if (back > data.size) back = data.size;\n          reader.readAsArrayBuffer(sliceFn.call(data, index, back));\n        };\n\n        reader._continueReading();\n      } else {\n        if (util.isBrowser() && typeof data === 'object' && !isBuffer) {\n          data = new util.Buffer(new Uint8Array(data));\n        }\n\n        var out = hash.update(data).digest(digest);\n        if (callback) callback(null, out);\n        return out;\n      }\n    },\n    toHex: function toHex(data) {\n      var out = [];\n\n      for (var i = 0; i < data.length; i++) {\n        out.push(('0' + data.charCodeAt(i).toString(16)).substr(-2, 2));\n      }\n\n      return out.join('');\n    },\n    createHash: function createHash(algorithm) {\n      return util.crypto.lib.createHash(algorithm);\n    }\n  },\n\n  /** @!ignore */\n\n  /* Abort constant */\n  abort: {},\n  each: function each(object, iterFunction) {\n    for (var key in object) {\n      if (Object.prototype.hasOwnProperty.call(object, key)) {\n        var ret = iterFunction.call(this, key, object[key]);\n        if (ret === util.abort) break;\n      }\n    }\n  },\n  arrayEach: function arrayEach(array, iterFunction) {\n    for (var idx in array) {\n      if (Object.prototype.hasOwnProperty.call(array, idx)) {\n        var ret = iterFunction.call(this, array[idx], parseInt(idx, 10));\n        if (ret === util.abort) break;\n      }\n    }\n  },\n  update: function update(obj1, obj2) {\n    util.each(obj2, function iterator(key, item) {\n      obj1[key] = item;\n    });\n    return obj1;\n  },\n  merge: function merge(obj1, obj2) {\n    return util.update(util.copy(obj1), obj2);\n  },\n  copy: function copy(object) {\n    if (object === null || object === undefined) return object;\n    var dupe = {}; // jshint forin:false\n\n    for (var key in object) {\n      dupe[key] = object[key];\n    }\n\n    return dupe;\n  },\n  isEmpty: function isEmpty(obj) {\n    for (var prop in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n  arraySliceFn: function arraySliceFn(obj) {\n    var fn = obj.slice || obj.webkitSlice || obj.mozSlice;\n    return typeof fn === 'function' ? fn : null;\n  },\n  isType: function isType(obj, type) {\n    // handle cross-\"frame\" objects\n    if (typeof type === 'function') type = util.typeName(type);\n    return Object.prototype.toString.call(obj) === '[object ' + type + ']';\n  },\n  typeName: function typeName(type) {\n    if (Object.prototype.hasOwnProperty.call(type, 'name')) return type.name;\n    var str = type.toString();\n    var match = str.match(/^\\s*function (.+)\\(/);\n    return match ? match[1] : str;\n  },\n  error: function error(err, options) {\n    var originalError = null;\n\n    if (typeof err.message === 'string' && err.message !== '') {\n      if (typeof options === 'string' || options && options.message) {\n        originalError = util.copy(err);\n        originalError.message = err.message;\n      }\n    }\n\n    err.message = err.message || null;\n\n    if (typeof options === 'string') {\n      err.message = options;\n    } else if (typeof options === 'object' && options !== null) {\n      util.update(err, options);\n      if (options.message) err.message = options.message;\n      if (options.code || options.name) err.code = options.code || options.name;\n      if (options.stack) err.stack = options.stack;\n    }\n\n    if (typeof Object.defineProperty === 'function') {\n      Object.defineProperty(err, 'name', {\n        writable: true,\n        enumerable: false\n      });\n      Object.defineProperty(err, 'message', {\n        enumerable: true\n      });\n    }\n\n    err.name = options && options.name || err.name || err.code || 'Error';\n    err.time = new Date();\n    if (originalError) err.originalError = originalError;\n    return err;\n  },\n\n  /**\r\n   * @api private\r\n   */\n  inherit: function inherit(klass, features) {\n    var newObject = null;\n\n    if (features === undefined) {\n      features = klass;\n      klass = Object;\n      newObject = {};\n    } else {\n      var ctor = function ConstructorWrapper() {};\n\n      ctor.prototype = klass.prototype;\n      newObject = new ctor();\n    } // constructor not supplied, create pass-through ctor\n\n\n    if (features.constructor === Object) {\n      features.constructor = function () {\n        if (klass !== Object) {\n          return klass.apply(this, arguments);\n        }\n      };\n    }\n\n    features.constructor.prototype = newObject;\n    util.update(features.constructor.prototype, features);\n    features.constructor.__super__ = klass;\n    return features.constructor;\n  },\n\n  /**\r\n   * @api private\r\n   */\n  mixin: function mixin() {\n    var klass = arguments[0];\n\n    for (var i = 1; i < arguments.length; i++) {\n      // jshint forin:false\n      for (var prop in arguments[i].prototype) {\n        var fn = arguments[i].prototype[prop];\n\n        if (prop !== 'constructor') {\n          klass.prototype[prop] = fn;\n        }\n      }\n    }\n\n    return klass;\n  },\n\n  /**\r\n   * @api private\r\n   */\n  hideProperties: function hideProperties(obj, props) {\n    if (typeof Object.defineProperty !== 'function') return;\n    util.arrayEach(props, function (key) {\n      Object.defineProperty(obj, key, {\n        enumerable: false,\n        writable: true,\n        configurable: true\n      });\n    });\n  },\n\n  /**\r\n   * @api private\r\n   */\n  property: function property(obj, name, value, enumerable, isValue) {\n    var opts = {\n      configurable: true,\n      enumerable: enumerable !== undefined ? enumerable : true\n    };\n\n    if (typeof value === 'function' && !isValue) {\n      opts.get = value;\n    } else {\n      opts.value = value;\n      opts.writable = true;\n    }\n\n    Object.defineProperty(obj, name, opts);\n  },\n\n  /**\r\n   * @api private\r\n   */\n  memoizedProperty: function memoizedProperty(obj, name, get, enumerable) {\n    var cachedValue = null; // build enumerable attribute for each value with lazy accessor.\n\n    util.property(obj, name, function () {\n      if (cachedValue === null) {\n        cachedValue = get();\n      }\n\n      return cachedValue;\n    }, enumerable);\n  },\n\n  /**\r\n   * TODO Remove in major version revision\r\n   * This backfill populates response data without the\r\n   * top-level payload name.\r\n   *\r\n   * @api private\r\n   */\n  hoistPayloadMember: function hoistPayloadMember(resp) {\n    var req = resp.request;\n    var operationName = req.operation;\n    var operation = req.service.api.operations[operationName];\n    var output = operation.output;\n\n    if (output.payload && !operation.hasEventOutput) {\n      var payloadMember = output.members[output.payload];\n      var responsePayload = resp.data[output.payload];\n\n      if (payloadMember.type === 'structure') {\n        util.each(responsePayload, function (key, value) {\n          util.property(resp.data, key, value, false);\n        });\n      }\n    }\n  },\n\n  /**\r\n   * Compute SHA-256 checksums of streams\r\n   *\r\n   * @api private\r\n   */\n  computeSha256: function computeSha256(body, done) {\n    if (util.isNode()) {\n      var Stream = util.stream.Stream;\n\n      var fs = require('fs');\n\n      if (typeof Stream === 'function' && body instanceof Stream) {\n        if (typeof body.path === 'string') {\n          // assume file object\n          var settings = {};\n\n          if (typeof body.start === 'number') {\n            settings.start = body.start;\n          }\n\n          if (typeof body.end === 'number') {\n            settings.end = body.end;\n          }\n\n          body = fs.createReadStream(body.path, settings);\n        } else {\n          // TODO support other stream types\n          return done(new Error('Non-file stream objects are ' + 'not supported with SigV4'));\n        }\n      }\n    }\n\n    util.crypto.sha256(body, 'hex', function (err, sha) {\n      if (err) done(err);else done(null, sha);\n    });\n  },\n\n  /**\r\n   * @api private\r\n   */\n  isClockSkewed: function isClockSkewed(serverTime) {\n    if (serverTime) {\n      util.property(AWS.config, 'isClockSkewed', Math.abs(new Date().getTime() - serverTime) >= 300000, false);\n      return AWS.config.isClockSkewed;\n    }\n  },\n  applyClockOffset: function applyClockOffset(serverTime) {\n    if (serverTime) AWS.config.systemClockOffset = serverTime - new Date().getTime();\n  },\n\n  /**\r\n   * @api private\r\n   */\n  extractRequestId: function extractRequestId(resp) {\n    var requestId = resp.httpResponse.headers['x-amz-request-id'] || resp.httpResponse.headers['x-amzn-requestid'];\n\n    if (!requestId && resp.data && resp.data.ResponseMetadata) {\n      requestId = resp.data.ResponseMetadata.RequestId;\n    }\n\n    if (requestId) {\n      resp.requestId = requestId;\n    }\n\n    if (resp.error) {\n      resp.error.requestId = requestId;\n    }\n  },\n\n  /**\r\n   * @api private\r\n   */\n  addPromises: function addPromises(constructors, PromiseDependency) {\n    var deletePromises = false;\n\n    if (PromiseDependency === undefined && AWS && AWS.config) {\n      PromiseDependency = AWS.config.getPromisesDependency();\n    }\n\n    if (PromiseDependency === undefined && typeof Promise !== 'undefined') {\n      PromiseDependency = Promise;\n    }\n\n    if (typeof PromiseDependency !== 'function') deletePromises = true;\n    if (!Array.isArray(constructors)) constructors = [constructors];\n\n    for (var ind = 0; ind < constructors.length; ind++) {\n      var constructor = constructors[ind];\n\n      if (deletePromises) {\n        if (constructor.deletePromisesFromClass) {\n          constructor.deletePromisesFromClass();\n        }\n      } else if (constructor.addPromisesToClass) {\n        constructor.addPromisesToClass(PromiseDependency);\n      }\n    }\n  },\n\n  /**\r\n   * @api private\r\n   */\n  promisifyMethod: function promisifyMethod(methodName, PromiseDependency) {\n    return function promise() {\n      var self = this;\n      return new PromiseDependency(function (resolve, reject) {\n        self[methodName](function (err, data) {\n          if (err) {\n            reject(err);\n          } else {\n            resolve(data);\n          }\n        });\n      });\n    };\n  },\n\n  /**\r\n   * @api private\r\n   */\n  isDualstackAvailable: function isDualstackAvailable(service) {\n    if (!service) return false;\n\n    var metadata = require('../apis/metadata.json');\n\n    if (typeof service !== 'string') service = service.serviceIdentifier;\n    if (typeof service !== 'string' || !metadata.hasOwnProperty(service)) return false;\n    return !!metadata[service].dualstackAvailable;\n  },\n\n  /**\r\n   * @api private\r\n   */\n  calculateRetryDelay: function calculateRetryDelay(retryCount, retryDelayOptions) {\n    if (!retryDelayOptions) retryDelayOptions = {};\n    var customBackoff = retryDelayOptions.customBackoff || null;\n\n    if (typeof customBackoff === 'function') {\n      return customBackoff(retryCount);\n    }\n\n    var base = typeof retryDelayOptions.base === 'number' ? retryDelayOptions.base : 100;\n    var delay = Math.random() * (Math.pow(2, retryCount) * base);\n    return delay;\n  },\n\n  /**\r\n   * @api private\r\n   */\n  handleRequestWithRetries: function handleRequestWithRetries(httpRequest, options, cb) {\n    if (!options) options = {};\n    var http = AWS.HttpClient.getInstance();\n    var httpOptions = options.httpOptions || {};\n    var retryCount = 0;\n\n    var errCallback = function errCallback(err) {\n      var maxRetries = options.maxRetries || 0;\n      if (err && err.code === 'TimeoutError') err.retryable = true;\n\n      if (err && err.retryable && retryCount < maxRetries) {\n        retryCount++;\n        var delay = util.calculateRetryDelay(retryCount, options.retryDelayOptions);\n        setTimeout(sendRequest, delay + (err.retryAfter || 0));\n      } else {\n        cb(err);\n      }\n    };\n\n    var sendRequest = function sendRequest() {\n      var data = '';\n      http.handleRequest(httpRequest, httpOptions, function (httpResponse) {\n        httpResponse.on('data', function (chunk) {\n          data += chunk.toString();\n        });\n        httpResponse.on('end', function () {\n          var statusCode = httpResponse.statusCode;\n\n          if (statusCode < 300) {\n            cb(null, data);\n          } else {\n            var retryAfter = parseInt(httpResponse.headers['retry-after'], 10) * 1000 || 0;\n            var err = util.error(new Error(), {\n              retryable: statusCode >= 500 || statusCode === 429\n            });\n            if (retryAfter && err.retryable) err.retryAfter = retryAfter;\n            errCallback(err);\n          }\n        });\n      }, errCallback);\n    };\n\n    AWS.util.defer(sendRequest);\n  },\n\n  /**\r\n   * @api private\r\n   */\n  uuid: {\n    v4: function uuidV4() {\n      return require('uuid').v4();\n    }\n  },\n\n  /**\r\n   * @api private\r\n   */\n  convertPayloadToString: function convertPayloadToString(resp) {\n    var req = resp.request;\n    var operation = req.operation;\n    var rules = req.service.api.operations[operation].output || {};\n\n    if (rules.payload && resp.data[rules.payload]) {\n      resp.data[rules.payload] = resp.data[rules.payload].toString();\n    }\n  },\n\n  /**\r\n   * @api private\r\n   */\n  defer: function defer(callback) {\n    if (typeof process === 'object' && typeof process.nextTick === 'function') {\n      process.nextTick(callback);\n    } else if (typeof setImmediate === 'function') {\n      setImmediate(callback);\n    } else {\n      setTimeout(callback, 0);\n    }\n  },\n\n  /**\r\n   * @api private\r\n   */\n  getRequestPayloadShape: function getRequestPayloadShape(req) {\n    var operations = req.service.api.operations;\n    if (!operations) return undefined;\n    var operation = (operations || {})[req.operation];\n    if (!operation || !operation.input || !operation.input.payload) return undefined;\n    return operation.input.members[operation.input.payload];\n  },\n  getProfilesFromSharedConfig: function getProfilesFromSharedConfig(iniLoader, filename) {\n    var profiles = {};\n    var profilesFromConfig = {};\n\n    if (process.env[util.configOptInEnv]) {\n      var profilesFromConfig = iniLoader.loadFrom({\n        isConfig: true,\n        filename: process.env[util.sharedConfigFileEnv]\n      });\n    }\n\n    var profilesFromCreds = iniLoader.loadFrom({\n      filename: filename || process.env[util.configOptInEnv] && process.env[util.sharedCredentialsFileEnv]\n    });\n\n    for (var i = 0, profileNames = Object.keys(profilesFromConfig); i < profileNames.length; i++) {\n      profiles[profileNames[i]] = profilesFromConfig[profileNames[i]];\n    }\n\n    for (var i = 0, profileNames = Object.keys(profilesFromCreds); i < profileNames.length; i++) {\n      profiles[profileNames[i]] = profilesFromCreds[profileNames[i]];\n    }\n\n    return profiles;\n  },\n\n  /**\r\n   * @api private\r\n   */\n  defaultProfile: 'default',\n\n  /**\r\n   * @api private\r\n   */\n  configOptInEnv: 'AWS_SDK_LOAD_CONFIG',\n\n  /**\r\n   * @api private\r\n   */\n  sharedCredentialsFileEnv: 'AWS_SHARED_CREDENTIALS_FILE',\n\n  /**\r\n   * @api private\r\n   */\n  sharedConfigFileEnv: 'AWS_CONFIG_FILE',\n\n  /**\r\n   * @api private\r\n   */\n  imdsDisabledEnv: 'AWS_EC2_METADATA_DISABLED'\n};\n/**\r\n * @api private\r\n */\n\nmodule.exports = util;","map":{"version":3,"sources":["C:/Users/Shutt/Documents/COMPX341/COMPX341-Assignment4/assets/node_modules/aws-sdk/lib/util.js"],"names":["AWS","util","environment","engine","isBrowser","navigator","userAgent","process","platform","version","env","AWS_EXECUTION_ENV","name","agent","require","VERSION","uriEscape","string","output","encodeURIComponent","replace","escape","ch","charCodeAt","toString","toUpperCase","uriEscapePath","parts","arrayEach","split","part","push","join","urlParse","url","parse","urlFormat","format","queryStringParse","qs","querystring","queryParamsToString","params","items","sortedKeys","Object","keys","sort","value","ename","result","Array","isArray","vals","item","undefined","readFileSync","path","base64","encode","encode64","error","Error","buf","buffer","toBuffer","decode","decode64","data","encoding","Buffer","from","Uint8Array","alloc","size","fill","toStream","isBuffer","readable","stream","Readable","pos","_read","length","end","slice","concat","buffers","offset","i","copy","byteLength","lstatSync","object","upperFirst","substr","lowerFirst","toLowerCase","ini","currentSection","map","line","section","match","fn","noop","callback","err","makeAsync","expectedArgs","args","prototype","call","arguments","pop","apply","date","getDate","config","systemClockOffset","Date","getTime","iso8601","toISOString","rfc822","toUTCString","unixTimestamp","formatter","parseTimestamp","code","crypto","crc32Table","crc32","tbl","crc","readUInt8","hmac","key","digest","lib","createHmac","update","md5","hash","sha256","algorithm","createHash","sliceFn","arraySliceFn","ArrayBuffer","on","chunk","FileReader","index","reader","onerror","onload","_continueReading","back","readAsArrayBuffer","out","toHex","abort","each","iterFunction","hasOwnProperty","ret","array","idx","parseInt","obj1","obj2","iterator","merge","dupe","isEmpty","obj","prop","webkitSlice","mozSlice","isType","type","typeName","str","options","originalError","message","stack","defineProperty","writable","enumerable","time","inherit","klass","features","newObject","ctor","ConstructorWrapper","constructor","__super__","mixin","hideProperties","props","configurable","property","isValue","opts","get","memoizedProperty","cachedValue","hoistPayloadMember","resp","req","request","operationName","operation","service","api","operations","payload","hasEventOutput","payloadMember","members","responsePayload","computeSha256","body","done","isNode","Stream","fs","settings","start","createReadStream","sha","isClockSkewed","serverTime","Math","abs","applyClockOffset","extractRequestId","requestId","httpResponse","headers","ResponseMetadata","RequestId","addPromises","constructors","PromiseDependency","deletePromises","getPromisesDependency","Promise","ind","deletePromisesFromClass","addPromisesToClass","promisifyMethod","methodName","promise","self","resolve","reject","isDualstackAvailable","metadata","serviceIdentifier","dualstackAvailable","calculateRetryDelay","retryCount","retryDelayOptions","customBackoff","base","delay","random","pow","handleRequestWithRetries","httpRequest","cb","http","HttpClient","getInstance","httpOptions","errCallback","maxRetries","retryable","setTimeout","sendRequest","retryAfter","handleRequest","statusCode","defer","uuid","v4","uuidV4","convertPayloadToString","rules","nextTick","setImmediate","getRequestPayloadShape","input","getProfilesFromSharedConfig","iniLoader","filename","profiles","profilesFromConfig","configOptInEnv","loadFrom","isConfig","sharedConfigFileEnv","profilesFromCreds","sharedCredentialsFileEnv","profileNames","defaultProfile","imdsDisabledEnv","module","exports"],"mappings":"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","sourcesContent":["/* eslint guard-for-in:0 */\r\nvar AWS;\r\n\r\n/**\r\n * A set of utility methods for use with the AWS SDK.\r\n *\r\n * @!attribute abort\r\n *   Return this value from an iterator function {each} or {arrayEach}\r\n *   to break out of the iteration.\r\n *   @example Breaking out of an iterator function\r\n *     AWS.util.each({a: 1, b: 2, c: 3}, function(key, value) {\r\n *       if (key == 'b') return AWS.util.abort;\r\n *     });\r\n *   @see each\r\n *   @see arrayEach\r\n * @api private\r\n */\r\nvar util = {\r\n  environment: 'nodejs',\r\n  engine: function engine() {\r\n    if (util.isBrowser() && typeof navigator !== 'undefined') {\r\n      return navigator.userAgent;\r\n    } else {\r\n      var engine = process.platform + '/' + process.version;\r\n      if (process.env.AWS_EXECUTION_ENV) {\r\n        engine += ' exec-env/' + process.env.AWS_EXECUTION_ENV;\r\n      }\r\n      return engine;\r\n    }\r\n  },\r\n\r\n  userAgent: function userAgent() {\r\n    var name = util.environment;\r\n    var agent = 'aws-sdk-' + name + '/' + require('./core').VERSION;\r\n    if (name === 'nodejs') agent += ' ' + util.engine();\r\n    return agent;\r\n  },\r\n\r\n  uriEscape: function uriEscape(string) {\r\n    var output = encodeURIComponent(string);\r\n    output = output.replace(/[^A-Za-z0-9_.~\\-%]+/g, escape);\r\n\r\n    // AWS percent-encodes some extra non-standard characters in a URI\r\n    output = output.replace(/[*]/g, function(ch) {\r\n      return '%' + ch.charCodeAt(0).toString(16).toUpperCase();\r\n    });\r\n\r\n    return output;\r\n  },\r\n\r\n  uriEscapePath: function uriEscapePath(string) {\r\n    var parts = [];\r\n    util.arrayEach(string.split('/'), function (part) {\r\n      parts.push(util.uriEscape(part));\r\n    });\r\n    return parts.join('/');\r\n  },\r\n\r\n  urlParse: function urlParse(url) {\r\n    return util.url.parse(url);\r\n  },\r\n\r\n  urlFormat: function urlFormat(url) {\r\n    return util.url.format(url);\r\n  },\r\n\r\n  queryStringParse: function queryStringParse(qs) {\r\n    return util.querystring.parse(qs);\r\n  },\r\n\r\n  queryParamsToString: function queryParamsToString(params) {\r\n    var items = [];\r\n    var escape = util.uriEscape;\r\n    var sortedKeys = Object.keys(params).sort();\r\n\r\n    util.arrayEach(sortedKeys, function(name) {\r\n      var value = params[name];\r\n      var ename = escape(name);\r\n      var result = ename + '=';\r\n      if (Array.isArray(value)) {\r\n        var vals = [];\r\n        util.arrayEach(value, function(item) { vals.push(escape(item)); });\r\n        result = ename + '=' + vals.sort().join('&' + ename + '=');\r\n      } else if (value !== undefined && value !== null) {\r\n        result = ename + '=' + escape(value);\r\n      }\r\n      items.push(result);\r\n    });\r\n\r\n    return items.join('&');\r\n  },\r\n\r\n  readFileSync: function readFileSync(path) {\r\n    if (util.isBrowser()) return null;\r\n    return require('fs').readFileSync(path, 'utf-8');\r\n  },\r\n\r\n  base64: {\r\n    encode: function encode64(string) {\r\n      if (typeof string === 'number') {\r\n        throw util.error(new Error('Cannot base64 encode number ' + string));\r\n      }\r\n      if (string === null || typeof string === 'undefined') {\r\n        return string;\r\n      }\r\n      var buf = util.buffer.toBuffer(string);\r\n      return buf.toString('base64');\r\n    },\r\n\r\n    decode: function decode64(string) {\r\n      if (typeof string === 'number') {\r\n        throw util.error(new Error('Cannot base64 decode number ' + string));\r\n      }\r\n      if (string === null || typeof string === 'undefined') {\r\n        return string;\r\n      }\r\n      return util.buffer.toBuffer(string, 'base64');\r\n    }\r\n\r\n  },\r\n\r\n  buffer: {\r\n    /**\r\n     * Buffer constructor for Node buffer and buffer pollyfill\r\n     */\r\n    toBuffer: function(data, encoding) {\r\n      return (typeof util.Buffer.from === 'function' && util.Buffer.from !== Uint8Array.from) ?\r\n        util.Buffer.from(data, encoding) : new util.Buffer(data, encoding);\r\n    },\r\n\r\n    alloc: function(size, fill, encoding) {\r\n      if (typeof size !== 'number') {\r\n        throw new Error('size passed to alloc must be a number.');\r\n      }\r\n      if (typeof util.Buffer.alloc === 'function') {\r\n        return util.Buffer.alloc(size, fill, encoding);\r\n      } else {\r\n        var buf = new util.Buffer(size);\r\n        if (fill !== undefined && typeof buf.fill === 'function') {\r\n          buf.fill(fill, undefined, undefined, encoding);\r\n        }\r\n        return buf;\r\n      }\r\n    },\r\n\r\n    toStream: function toStream(buffer) {\r\n      if (!util.Buffer.isBuffer(buffer)) buffer =  util.buffer.toBuffer(buffer);\r\n\r\n      var readable = new (util.stream.Readable)();\r\n      var pos = 0;\r\n      readable._read = function(size) {\r\n        if (pos >= buffer.length) return readable.push(null);\r\n\r\n        var end = pos + size;\r\n        if (end > buffer.length) end = buffer.length;\r\n        readable.push(buffer.slice(pos, end));\r\n        pos = end;\r\n      };\r\n\r\n      return readable;\r\n    },\r\n\r\n    /**\r\n     * Concatenates a list of Buffer objects.\r\n     */\r\n    concat: function(buffers) {\r\n      var length = 0,\r\n          offset = 0,\r\n          buffer = null, i;\r\n\r\n      for (i = 0; i < buffers.length; i++) {\r\n        length += buffers[i].length;\r\n      }\r\n\r\n      buffer = util.buffer.alloc(length);\r\n\r\n      for (i = 0; i < buffers.length; i++) {\r\n        buffers[i].copy(buffer, offset);\r\n        offset += buffers[i].length;\r\n      }\r\n\r\n      return buffer;\r\n    }\r\n  },\r\n\r\n  string: {\r\n    byteLength: function byteLength(string) {\r\n      if (string === null || string === undefined) return 0;\r\n      if (typeof string === 'string') string = util.buffer.toBuffer(string);\r\n\r\n      if (typeof string.byteLength === 'number') {\r\n        return string.byteLength;\r\n      } else if (typeof string.length === 'number') {\r\n        return string.length;\r\n      } else if (typeof string.size === 'number') {\r\n        return string.size;\r\n      } else if (typeof string.path === 'string') {\r\n        return require('fs').lstatSync(string.path).size;\r\n      } else {\r\n        throw util.error(new Error('Cannot determine length of ' + string),\r\n          { object: string });\r\n      }\r\n    },\r\n\r\n    upperFirst: function upperFirst(string) {\r\n      return string[0].toUpperCase() + string.substr(1);\r\n    },\r\n\r\n    lowerFirst: function lowerFirst(string) {\r\n      return string[0].toLowerCase() + string.substr(1);\r\n    }\r\n  },\r\n\r\n  ini: {\r\n    parse: function string(ini) {\r\n      var currentSection, map = {};\r\n      util.arrayEach(ini.split(/\\r?\\n/), function(line) {\r\n        line = line.split(/(^|\\s)[;#]/)[0]; // remove comments\r\n        var section = line.match(/^\\s*\\[([^\\[\\]]+)\\]\\s*$/);\r\n        if (section) {\r\n          currentSection = section[1];\r\n        } else if (currentSection) {\r\n          var item = line.match(/^\\s*(.+?)\\s*=\\s*(.+?)\\s*$/);\r\n          if (item) {\r\n            map[currentSection] = map[currentSection] || {};\r\n            map[currentSection][item[1]] = item[2];\r\n          }\r\n        }\r\n      });\r\n\r\n      return map;\r\n    }\r\n  },\r\n\r\n  fn: {\r\n    noop: function() {},\r\n    callback: function (err) { if (err) throw err; },\r\n\r\n    /**\r\n     * Turn a synchronous function into as \"async\" function by making it call\r\n     * a callback. The underlying function is called with all but the last argument,\r\n     * which is treated as the callback. The callback is passed passed a first argument\r\n     * of null on success to mimick standard node callbacks.\r\n     */\r\n    makeAsync: function makeAsync(fn, expectedArgs) {\r\n      if (expectedArgs && expectedArgs <= fn.length) {\r\n        return fn;\r\n      }\r\n\r\n      return function() {\r\n        var args = Array.prototype.slice.call(arguments, 0);\r\n        var callback = args.pop();\r\n        var result = fn.apply(null, args);\r\n        callback(result);\r\n      };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Date and time utility functions.\r\n   */\r\n  date: {\r\n\r\n    /**\r\n     * @return [Date] the current JavaScript date object. Since all\r\n     *   AWS services rely on this date object, you can override\r\n     *   this function to provide a special time value to AWS service\r\n     *   requests.\r\n     */\r\n    getDate: function getDate() {\r\n      if (!AWS) AWS = require('./core');\r\n      if (AWS.config.systemClockOffset) { // use offset when non-zero\r\n        return new Date(new Date().getTime() + AWS.config.systemClockOffset);\r\n      } else {\r\n        return new Date();\r\n      }\r\n    },\r\n\r\n    /**\r\n     * @return [String] the date in ISO-8601 format\r\n     */\r\n    iso8601: function iso8601(date) {\r\n      if (date === undefined) { date = util.date.getDate(); }\r\n      return date.toISOString().replace(/\\.\\d{3}Z$/, 'Z');\r\n    },\r\n\r\n    /**\r\n     * @return [String] the date in RFC 822 format\r\n     */\r\n    rfc822: function rfc822(date) {\r\n      if (date === undefined) { date = util.date.getDate(); }\r\n      return date.toUTCString();\r\n    },\r\n\r\n    /**\r\n     * @return [Integer] the UNIX timestamp value for the current time\r\n     */\r\n    unixTimestamp: function unixTimestamp(date) {\r\n      if (date === undefined) { date = util.date.getDate(); }\r\n      return date.getTime() / 1000;\r\n    },\r\n\r\n    /**\r\n     * @param [String,number,Date] date\r\n     * @return [Date]\r\n     */\r\n    from: function format(date) {\r\n      if (typeof date === 'number') {\r\n        return new Date(date * 1000); // unix timestamp\r\n      } else {\r\n        return new Date(date);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Given a Date or date-like value, this function formats the\r\n     * date into a string of the requested value.\r\n     * @param [String,number,Date] date\r\n     * @param [String] formatter Valid formats are:\r\n     #   * 'iso8601'\r\n     #   * 'rfc822'\r\n     #   * 'unixTimestamp'\r\n     * @return [String]\r\n     */\r\n    format: function format(date, formatter) {\r\n      if (!formatter) formatter = 'iso8601';\r\n      return util.date[formatter](util.date.from(date));\r\n    },\r\n\r\n    parseTimestamp: function parseTimestamp(value) {\r\n      if (typeof value === 'number') { // unix timestamp (number)\r\n        return new Date(value * 1000);\r\n      } else if (value.match(/^\\d+$/)) { // unix timestamp\r\n        return new Date(value * 1000);\r\n      } else if (value.match(/^\\d{4}/)) { // iso8601\r\n        return new Date(value);\r\n      } else if (value.match(/^\\w{3},/)) { // rfc822\r\n        return new Date(value);\r\n      } else {\r\n        throw util.error(\r\n          new Error('unhandled timestamp format: ' + value),\r\n          {code: 'TimestampParserError'});\r\n      }\r\n    }\r\n\r\n  },\r\n\r\n  crypto: {\r\n    crc32Table: [\r\n     0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA, 0x076DC419,\r\n     0x706AF48F, 0xE963A535, 0x9E6495A3, 0x0EDB8832, 0x79DCB8A4,\r\n     0xE0D5E91E, 0x97D2D988, 0x09B64C2B, 0x7EB17CBD, 0xE7B82D07,\r\n     0x90BF1D91, 0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE,\r\n     0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7, 0x136C9856,\r\n     0x646BA8C0, 0xFD62F97A, 0x8A65C9EC, 0x14015C4F, 0x63066CD9,\r\n     0xFA0F3D63, 0x8D080DF5, 0x3B6E20C8, 0x4C69105E, 0xD56041E4,\r\n     0xA2677172, 0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B,\r\n     0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940, 0x32D86CE3,\r\n     0x45DF5C75, 0xDCD60DCF, 0xABD13D59, 0x26D930AC, 0x51DE003A,\r\n     0xC8D75180, 0xBFD06116, 0x21B4F4B5, 0x56B3C423, 0xCFBA9599,\r\n     0xB8BDA50F, 0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924,\r\n     0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D, 0x76DC4190,\r\n     0x01DB7106, 0x98D220BC, 0xEFD5102A, 0x71B18589, 0x06B6B51F,\r\n     0x9FBFE4A5, 0xE8B8D433, 0x7807C9A2, 0x0F00F934, 0x9609A88E,\r\n     0xE10E9818, 0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01,\r\n     0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E, 0x6C0695ED,\r\n     0x1B01A57B, 0x8208F4C1, 0xF50FC457, 0x65B0D9C6, 0x12B7E950,\r\n     0x8BBEB8EA, 0xFCB9887C, 0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3,\r\n     0xFBD44C65, 0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2,\r\n     0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB, 0x4369E96A,\r\n     0x346ED9FC, 0xAD678846, 0xDA60B8D0, 0x44042D73, 0x33031DE5,\r\n     0xAA0A4C5F, 0xDD0D7CC9, 0x5005713C, 0x270241AA, 0xBE0B1010,\r\n     0xC90C2086, 0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F,\r\n     0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4, 0x59B33D17,\r\n     0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD, 0xEDB88320, 0x9ABFB3B6,\r\n     0x03B6E20C, 0x74B1D29A, 0xEAD54739, 0x9DD277AF, 0x04DB2615,\r\n     0x73DC1683, 0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8,\r\n     0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1, 0xF00F9344,\r\n     0x8708A3D2, 0x1E01F268, 0x6906C2FE, 0xF762575D, 0x806567CB,\r\n     0x196C3671, 0x6E6B06E7, 0xFED41B76, 0x89D32BE0, 0x10DA7A5A,\r\n     0x67DD4ACC, 0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5,\r\n     0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252, 0xD1BB67F1,\r\n     0xA6BC5767, 0x3FB506DD, 0x48B2364B, 0xD80D2BDA, 0xAF0A1B4C,\r\n     0x36034AF6, 0x41047A60, 0xDF60EFC3, 0xA867DF55, 0x316E8EEF,\r\n     0x4669BE79, 0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236,\r\n     0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F, 0xC5BA3BBE,\r\n     0xB2BD0B28, 0x2BB45A92, 0x5CB36A04, 0xC2D7FFA7, 0xB5D0CF31,\r\n     0x2CD99E8B, 0x5BDEAE1D, 0x9B64C2B0, 0xEC63F226, 0x756AA39C,\r\n     0x026D930A, 0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713,\r\n     0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38, 0x92D28E9B,\r\n     0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21, 0x86D3D2D4, 0xF1D4E242,\r\n     0x68DDB3F8, 0x1FDA836E, 0x81BE16CD, 0xF6B9265B, 0x6FB077E1,\r\n     0x18B74777, 0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C,\r\n     0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45, 0xA00AE278,\r\n     0xD70DD2EE, 0x4E048354, 0x3903B3C2, 0xA7672661, 0xD06016F7,\r\n     0x4969474D, 0x3E6E77DB, 0xAED16A4A, 0xD9D65ADC, 0x40DF0B66,\r\n     0x37D83BF0, 0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9,\r\n     0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6, 0xBAD03605,\r\n     0xCDD70693, 0x54DE5729, 0x23D967BF, 0xB3667A2E, 0xC4614AB8,\r\n     0x5D681B02, 0x2A6F2B94, 0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B,\r\n     0x2D02EF8D],\r\n\r\n    crc32: function crc32(data) {\r\n      var tbl = util.crypto.crc32Table;\r\n      var crc = 0 ^ -1;\r\n\r\n      if (typeof data === 'string') {\r\n        data = util.buffer.toBuffer(data);\r\n      }\r\n\r\n      for (var i = 0; i < data.length; i++) {\r\n        var code = data.readUInt8(i);\r\n        crc = (crc >>> 8) ^ tbl[(crc ^ code) & 0xFF];\r\n      }\r\n      return (crc ^ -1) >>> 0;\r\n    },\r\n\r\n    hmac: function hmac(key, string, digest, fn) {\r\n      if (!digest) digest = 'binary';\r\n      if (digest === 'buffer') { digest = undefined; }\r\n      if (!fn) fn = 'sha256';\r\n      if (typeof string === 'string') string = util.buffer.toBuffer(string);\r\n      return util.crypto.lib.createHmac(fn, key).update(string).digest(digest);\r\n    },\r\n\r\n    md5: function md5(data, digest, callback) {\r\n      return util.crypto.hash('md5', data, digest, callback);\r\n    },\r\n\r\n    sha256: function sha256(data, digest, callback) {\r\n      return util.crypto.hash('sha256', data, digest, callback);\r\n    },\r\n\r\n    hash: function(algorithm, data, digest, callback) {\r\n      var hash = util.crypto.createHash(algorithm);\r\n      if (!digest) { digest = 'binary'; }\r\n      if (digest === 'buffer') { digest = undefined; }\r\n      if (typeof data === 'string') data = util.buffer.toBuffer(data);\r\n      var sliceFn = util.arraySliceFn(data);\r\n      var isBuffer = util.Buffer.isBuffer(data);\r\n      //Identifying objects with an ArrayBuffer as buffers\r\n      if (util.isBrowser() && typeof ArrayBuffer !== 'undefined' && data && data.buffer instanceof ArrayBuffer) isBuffer = true;\r\n\r\n      if (callback && typeof data === 'object' &&\r\n          typeof data.on === 'function' && !isBuffer) {\r\n        data.on('data', function(chunk) { hash.update(chunk); });\r\n        data.on('error', function(err) { callback(err); });\r\n        data.on('end', function() { callback(null, hash.digest(digest)); });\r\n      } else if (callback && sliceFn && !isBuffer &&\r\n                 typeof FileReader !== 'undefined') {\r\n        // this might be a File/Blob\r\n        var index = 0, size = 1024 * 512;\r\n        var reader = new FileReader();\r\n        reader.onerror = function() {\r\n          callback(new Error('Failed to read data.'));\r\n        };\r\n        reader.onload = function() {\r\n          var buf = new util.Buffer(new Uint8Array(reader.result));\r\n          hash.update(buf);\r\n          index += buf.length;\r\n          reader._continueReading();\r\n        };\r\n        reader._continueReading = function() {\r\n          if (index >= data.size) {\r\n            callback(null, hash.digest(digest));\r\n            return;\r\n          }\r\n\r\n          var back = index + size;\r\n          if (back > data.size) back = data.size;\r\n          reader.readAsArrayBuffer(sliceFn.call(data, index, back));\r\n        };\r\n\r\n        reader._continueReading();\r\n      } else {\r\n        if (util.isBrowser() && typeof data === 'object' && !isBuffer) {\r\n          data = new util.Buffer(new Uint8Array(data));\r\n        }\r\n        var out = hash.update(data).digest(digest);\r\n        if (callback) callback(null, out);\r\n        return out;\r\n      }\r\n    },\r\n\r\n    toHex: function toHex(data) {\r\n      var out = [];\r\n      for (var i = 0; i < data.length; i++) {\r\n        out.push(('0' + data.charCodeAt(i).toString(16)).substr(-2, 2));\r\n      }\r\n      return out.join('');\r\n    },\r\n\r\n    createHash: function createHash(algorithm) {\r\n      return util.crypto.lib.createHash(algorithm);\r\n    }\r\n\r\n  },\r\n\r\n  /** @!ignore */\r\n\r\n  /* Abort constant */\r\n  abort: {},\r\n\r\n  each: function each(object, iterFunction) {\r\n    for (var key in object) {\r\n      if (Object.prototype.hasOwnProperty.call(object, key)) {\r\n        var ret = iterFunction.call(this, key, object[key]);\r\n        if (ret === util.abort) break;\r\n      }\r\n    }\r\n  },\r\n\r\n  arrayEach: function arrayEach(array, iterFunction) {\r\n    for (var idx in array) {\r\n      if (Object.prototype.hasOwnProperty.call(array, idx)) {\r\n        var ret = iterFunction.call(this, array[idx], parseInt(idx, 10));\r\n        if (ret === util.abort) break;\r\n      }\r\n    }\r\n  },\r\n\r\n  update: function update(obj1, obj2) {\r\n    util.each(obj2, function iterator(key, item) {\r\n      obj1[key] = item;\r\n    });\r\n    return obj1;\r\n  },\r\n\r\n  merge: function merge(obj1, obj2) {\r\n    return util.update(util.copy(obj1), obj2);\r\n  },\r\n\r\n  copy: function copy(object) {\r\n    if (object === null || object === undefined) return object;\r\n    var dupe = {};\r\n    // jshint forin:false\r\n    for (var key in object) {\r\n      dupe[key] = object[key];\r\n    }\r\n    return dupe;\r\n  },\r\n\r\n  isEmpty: function isEmpty(obj) {\r\n    for (var prop in obj) {\r\n      if (Object.prototype.hasOwnProperty.call(obj, prop)) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  },\r\n\r\n  arraySliceFn: function arraySliceFn(obj) {\r\n    var fn = obj.slice || obj.webkitSlice || obj.mozSlice;\r\n    return typeof fn === 'function' ? fn : null;\r\n  },\r\n\r\n  isType: function isType(obj, type) {\r\n    // handle cross-\"frame\" objects\r\n    if (typeof type === 'function') type = util.typeName(type);\r\n    return Object.prototype.toString.call(obj) === '[object ' + type + ']';\r\n  },\r\n\r\n  typeName: function typeName(type) {\r\n    if (Object.prototype.hasOwnProperty.call(type, 'name')) return type.name;\r\n    var str = type.toString();\r\n    var match = str.match(/^\\s*function (.+)\\(/);\r\n    return match ? match[1] : str;\r\n  },\r\n\r\n  error: function error(err, options) {\r\n    var originalError = null;\r\n    if (typeof err.message === 'string' && err.message !== '') {\r\n      if (typeof options === 'string' || (options && options.message)) {\r\n        originalError = util.copy(err);\r\n        originalError.message = err.message;\r\n      }\r\n    }\r\n    err.message = err.message || null;\r\n\r\n    if (typeof options === 'string') {\r\n      err.message = options;\r\n    } else if (typeof options === 'object' && options !== null) {\r\n      util.update(err, options);\r\n      if (options.message)\r\n        err.message = options.message;\r\n      if (options.code || options.name)\r\n        err.code = options.code || options.name;\r\n      if (options.stack)\r\n        err.stack = options.stack;\r\n    }\r\n\r\n    if (typeof Object.defineProperty === 'function') {\r\n      Object.defineProperty(err, 'name', {writable: true, enumerable: false});\r\n      Object.defineProperty(err, 'message', {enumerable: true});\r\n    }\r\n\r\n    err.name = options && options.name || err.name || err.code || 'Error';\r\n    err.time = new Date();\r\n\r\n    if (originalError) err.originalError = originalError;\r\n\r\n    return err;\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  inherit: function inherit(klass, features) {\r\n    var newObject = null;\r\n    if (features === undefined) {\r\n      features = klass;\r\n      klass = Object;\r\n      newObject = {};\r\n    } else {\r\n      var ctor = function ConstructorWrapper() {};\r\n      ctor.prototype = klass.prototype;\r\n      newObject = new ctor();\r\n    }\r\n\r\n    // constructor not supplied, create pass-through ctor\r\n    if (features.constructor === Object) {\r\n      features.constructor = function() {\r\n        if (klass !== Object) {\r\n          return klass.apply(this, arguments);\r\n        }\r\n      };\r\n    }\r\n\r\n    features.constructor.prototype = newObject;\r\n    util.update(features.constructor.prototype, features);\r\n    features.constructor.__super__ = klass;\r\n    return features.constructor;\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  mixin: function mixin() {\r\n    var klass = arguments[0];\r\n    for (var i = 1; i < arguments.length; i++) {\r\n      // jshint forin:false\r\n      for (var prop in arguments[i].prototype) {\r\n        var fn = arguments[i].prototype[prop];\r\n        if (prop !== 'constructor') {\r\n          klass.prototype[prop] = fn;\r\n        }\r\n      }\r\n    }\r\n    return klass;\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  hideProperties: function hideProperties(obj, props) {\r\n    if (typeof Object.defineProperty !== 'function') return;\r\n\r\n    util.arrayEach(props, function (key) {\r\n      Object.defineProperty(obj, key, {\r\n        enumerable: false, writable: true, configurable: true });\r\n    });\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  property: function property(obj, name, value, enumerable, isValue) {\r\n    var opts = {\r\n      configurable: true,\r\n      enumerable: enumerable !== undefined ? enumerable : true\r\n    };\r\n    if (typeof value === 'function' && !isValue) {\r\n      opts.get = value;\r\n    }\r\n    else {\r\n      opts.value = value; opts.writable = true;\r\n    }\r\n\r\n    Object.defineProperty(obj, name, opts);\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  memoizedProperty: function memoizedProperty(obj, name, get, enumerable) {\r\n    var cachedValue = null;\r\n\r\n    // build enumerable attribute for each value with lazy accessor.\r\n    util.property(obj, name, function() {\r\n      if (cachedValue === null) {\r\n        cachedValue = get();\r\n      }\r\n      return cachedValue;\r\n    }, enumerable);\r\n  },\r\n\r\n  /**\r\n   * TODO Remove in major version revision\r\n   * This backfill populates response data without the\r\n   * top-level payload name.\r\n   *\r\n   * @api private\r\n   */\r\n  hoistPayloadMember: function hoistPayloadMember(resp) {\r\n    var req = resp.request;\r\n    var operationName = req.operation;\r\n    var operation = req.service.api.operations[operationName];\r\n    var output = operation.output;\r\n    if (output.payload && !operation.hasEventOutput) {\r\n      var payloadMember = output.members[output.payload];\r\n      var responsePayload = resp.data[output.payload];\r\n      if (payloadMember.type === 'structure') {\r\n        util.each(responsePayload, function(key, value) {\r\n          util.property(resp.data, key, value, false);\r\n        });\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Compute SHA-256 checksums of streams\r\n   *\r\n   * @api private\r\n   */\r\n  computeSha256: function computeSha256(body, done) {\r\n    if (util.isNode()) {\r\n      var Stream = util.stream.Stream;\r\n      var fs = require('fs');\r\n      if (typeof Stream === 'function' && body instanceof Stream) {\r\n        if (typeof body.path === 'string') { // assume file object\r\n          var settings = {};\r\n          if (typeof body.start === 'number') {\r\n            settings.start = body.start;\r\n          }\r\n          if (typeof body.end === 'number') {\r\n            settings.end = body.end;\r\n          }\r\n          body = fs.createReadStream(body.path, settings);\r\n        } else { // TODO support other stream types\r\n          return done(new Error('Non-file stream objects are ' +\r\n                                'not supported with SigV4'));\r\n        }\r\n      }\r\n    }\r\n\r\n    util.crypto.sha256(body, 'hex', function(err, sha) {\r\n      if (err) done(err);\r\n      else done(null, sha);\r\n    });\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  isClockSkewed: function isClockSkewed(serverTime) {\r\n    if (serverTime) {\r\n      util.property(AWS.config, 'isClockSkewed',\r\n        Math.abs(new Date().getTime() - serverTime) >= 300000, false);\r\n      return AWS.config.isClockSkewed;\r\n    }\r\n  },\r\n\r\n  applyClockOffset: function applyClockOffset(serverTime) {\r\n    if (serverTime)\r\n      AWS.config.systemClockOffset = serverTime - new Date().getTime();\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  extractRequestId: function extractRequestId(resp) {\r\n    var requestId = resp.httpResponse.headers['x-amz-request-id'] ||\r\n                     resp.httpResponse.headers['x-amzn-requestid'];\r\n\r\n    if (!requestId && resp.data && resp.data.ResponseMetadata) {\r\n      requestId = resp.data.ResponseMetadata.RequestId;\r\n    }\r\n\r\n    if (requestId) {\r\n      resp.requestId = requestId;\r\n    }\r\n\r\n    if (resp.error) {\r\n      resp.error.requestId = requestId;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  addPromises: function addPromises(constructors, PromiseDependency) {\r\n    var deletePromises = false;\r\n    if (PromiseDependency === undefined && AWS && AWS.config) {\r\n      PromiseDependency = AWS.config.getPromisesDependency();\r\n    }\r\n    if (PromiseDependency === undefined && typeof Promise !== 'undefined') {\r\n      PromiseDependency = Promise;\r\n    }\r\n    if (typeof PromiseDependency !== 'function') deletePromises = true;\r\n    if (!Array.isArray(constructors)) constructors = [constructors];\r\n\r\n    for (var ind = 0; ind < constructors.length; ind++) {\r\n      var constructor = constructors[ind];\r\n      if (deletePromises) {\r\n        if (constructor.deletePromisesFromClass) {\r\n          constructor.deletePromisesFromClass();\r\n        }\r\n      } else if (constructor.addPromisesToClass) {\r\n        constructor.addPromisesToClass(PromiseDependency);\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  promisifyMethod: function promisifyMethod(methodName, PromiseDependency) {\r\n    return function promise() {\r\n      var self = this;\r\n      return new PromiseDependency(function(resolve, reject) {\r\n        self[methodName](function(err, data) {\r\n          if (err) {\r\n            reject(err);\r\n          } else {\r\n            resolve(data);\r\n          }\r\n        });\r\n      });\r\n    };\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  isDualstackAvailable: function isDualstackAvailable(service) {\r\n    if (!service) return false;\r\n    var metadata = require('../apis/metadata.json');\r\n    if (typeof service !== 'string') service = service.serviceIdentifier;\r\n    if (typeof service !== 'string' || !metadata.hasOwnProperty(service)) return false;\r\n    return !!metadata[service].dualstackAvailable;\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  calculateRetryDelay: function calculateRetryDelay(retryCount, retryDelayOptions) {\r\n    if (!retryDelayOptions) retryDelayOptions = {};\r\n    var customBackoff = retryDelayOptions.customBackoff || null;\r\n    if (typeof customBackoff === 'function') {\r\n      return customBackoff(retryCount);\r\n    }\r\n    var base = typeof retryDelayOptions.base === 'number' ? retryDelayOptions.base : 100;\r\n    var delay = Math.random() * (Math.pow(2, retryCount) * base);\r\n    return delay;\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  handleRequestWithRetries: function handleRequestWithRetries(httpRequest, options, cb) {\r\n    if (!options) options = {};\r\n    var http = AWS.HttpClient.getInstance();\r\n    var httpOptions = options.httpOptions || {};\r\n    var retryCount = 0;\r\n\r\n    var errCallback = function(err) {\r\n      var maxRetries = options.maxRetries || 0;\r\n      if (err && err.code === 'TimeoutError') err.retryable = true;\r\n      if (err && err.retryable && retryCount < maxRetries) {\r\n        retryCount++;\r\n        var delay = util.calculateRetryDelay(retryCount, options.retryDelayOptions);\r\n        setTimeout(sendRequest, delay + (err.retryAfter || 0));\r\n      } else {\r\n        cb(err);\r\n      }\r\n    };\r\n\r\n    var sendRequest = function() {\r\n      var data = '';\r\n      http.handleRequest(httpRequest, httpOptions, function(httpResponse) {\r\n        httpResponse.on('data', function(chunk) { data += chunk.toString(); });\r\n        httpResponse.on('end', function() {\r\n          var statusCode = httpResponse.statusCode;\r\n          if (statusCode < 300) {\r\n            cb(null, data);\r\n          } else {\r\n            var retryAfter = parseInt(httpResponse.headers['retry-after'], 10) * 1000 || 0;\r\n            var err = util.error(new Error(),\r\n              { retryable: statusCode >= 500 || statusCode === 429 }\r\n            );\r\n            if (retryAfter && err.retryable) err.retryAfter = retryAfter;\r\n            errCallback(err);\r\n          }\r\n        });\r\n      }, errCallback);\r\n    };\r\n\r\n    AWS.util.defer(sendRequest);\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  uuid: {\r\n    v4: function uuidV4() {\r\n      return require('uuid').v4();\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  convertPayloadToString: function convertPayloadToString(resp) {\r\n    var req = resp.request;\r\n    var operation = req.operation;\r\n    var rules = req.service.api.operations[operation].output || {};\r\n    if (rules.payload && resp.data[rules.payload]) {\r\n      resp.data[rules.payload] = resp.data[rules.payload].toString();\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  defer: function defer(callback) {\r\n    if (typeof process === 'object' && typeof process.nextTick === 'function') {\r\n      process.nextTick(callback);\r\n    } else if (typeof setImmediate === 'function') {\r\n      setImmediate(callback);\r\n    } else {\r\n      setTimeout(callback, 0);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  getRequestPayloadShape: function getRequestPayloadShape(req) {\r\n    var operations = req.service.api.operations;\r\n    if (!operations) return undefined;\r\n    var operation = (operations || {})[req.operation];\r\n    if (!operation || !operation.input || !operation.input.payload) return undefined;\r\n    return operation.input.members[operation.input.payload];\r\n  },\r\n\r\n  getProfilesFromSharedConfig: function getProfilesFromSharedConfig(iniLoader, filename) {\r\n    var profiles = {};\r\n    var profilesFromConfig = {};\r\n    if (process.env[util.configOptInEnv]) {\r\n      var profilesFromConfig = iniLoader.loadFrom({\r\n        isConfig: true,\r\n        filename: process.env[util.sharedConfigFileEnv]\r\n      });\r\n    }\r\n    var profilesFromCreds = iniLoader.loadFrom({\r\n      filename: filename ||\r\n        (process.env[util.configOptInEnv] && process.env[util.sharedCredentialsFileEnv])\r\n    });\r\n    for (var i = 0, profileNames = Object.keys(profilesFromConfig); i < profileNames.length; i++) {\r\n      profiles[profileNames[i]] = profilesFromConfig[profileNames[i]];\r\n    }\r\n    for (var i = 0, profileNames = Object.keys(profilesFromCreds); i < profileNames.length; i++) {\r\n      profiles[profileNames[i]] = profilesFromCreds[profileNames[i]];\r\n    }\r\n    return profiles;\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  defaultProfile: 'default',\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  configOptInEnv: 'AWS_SDK_LOAD_CONFIG',\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  sharedCredentialsFileEnv: 'AWS_SHARED_CREDENTIALS_FILE',\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  sharedConfigFileEnv: 'AWS_CONFIG_FILE',\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  imdsDisabledEnv: 'AWS_EC2_METADATA_DISABLED'\r\n};\r\n\r\n/**\r\n * @api private\r\n */\r\nmodule.exports = util;\r\n"]},"metadata":{},"sourceType":"script"}