{"ast":null,"code":"var AWS = require('../core');\n\nvar Translator = require('./translator');\n\nvar DynamoDBSet = require('./set');\n/**\r\n * The document client simplifies working with items in Amazon DynamoDB\r\n * by abstracting away the notion of attribute values. This abstraction\r\n * annotates native JavaScript types supplied as input parameters, as well\r\n * as converts annotated response data to native JavaScript types.\r\n *\r\n * ## Marshalling Input and Unmarshalling Response Data\r\n *\r\n * The document client affords developers the use of native JavaScript types\r\n * instead of `AttributeValue`s to simplify the JavaScript development\r\n * experience with Amazon DynamoDB. JavaScript objects passed in as parameters\r\n * are marshalled into `AttributeValue` shapes required by Amazon DynamoDB.\r\n * Responses from DynamoDB are unmarshalled into plain JavaScript objects\r\n * by the `DocumentClient`. The `DocumentClient`, does not accept\r\n * `AttributeValue`s in favor of native JavaScript types.\r\n *\r\n * |                             JavaScript Type                            | DynamoDB AttributeValue |\r\n * |:----------------------------------------------------------------------:|-------------------------|\r\n * | String                                                                 | S                       |\r\n * | Number                                                                 | N                       |\r\n * | Boolean                                                                | BOOL                    |\r\n * | null                                                                   | NULL                    |\r\n * | Array                                                                  | L                       |\r\n * | Object                                                                 | M                       |\r\n * | Buffer, File, Blob, ArrayBuffer, DataView, and JavaScript typed arrays | B                       |\r\n *\r\n * ## Support for Sets\r\n *\r\n * The `DocumentClient` offers a convenient way to create sets from\r\n * JavaScript Arrays. The type of set is inferred from the first element\r\n * in the array. DynamoDB supports string, number, and binary sets. To\r\n * learn more about supported types see the\r\n * [Amazon DynamoDB Data Model Documentation](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DataModel.html)\r\n * For more information see {AWS.DynamoDB.DocumentClient.createSet}\r\n *\r\n */\n\n\nAWS.DynamoDB.DocumentClient = AWS.util.inherit({\n  /**\r\n   * Creates a DynamoDB document client with a set of configuration options.\r\n   *\r\n   * @option options params [map] An optional map of parameters to bind to every\r\n   *   request sent by this service object.\r\n   * @option options service [AWS.DynamoDB] An optional pre-configured instance\r\n   *  of the AWS.DynamoDB service object to use for requests. The object may\r\n   *  bound parameters used by the document client.\r\n   * @option options convertEmptyValues [Boolean] set to true if you would like\r\n   *  the document client to convert empty values (0-length strings, binary\r\n   *  buffers, and sets) to be converted to NULL types when persisting to\r\n   *  DynamoDB.\r\n   * @see AWS.DynamoDB.constructor\r\n   *\r\n   */\n  constructor: function DocumentClient(options) {\n    var self = this;\n    self.options = options || {};\n    self.configure(self.options);\n  },\n\n  /**\r\n   * @api private\r\n   */\n  configure: function configure(options) {\n    var self = this;\n    self.service = options.service;\n    self.bindServiceObject(options);\n    self.attrValue = options.attrValue = self.service.api.operations.putItem.input.members.Item.value.shape;\n  },\n\n  /**\r\n   * @api private\r\n   */\n  bindServiceObject: function bindServiceObject(options) {\n    var self = this;\n    options = options || {};\n\n    if (!self.service) {\n      self.service = new AWS.DynamoDB(options);\n    } else {\n      var config = AWS.util.copy(self.service.config);\n      self.service = new self.service.constructor.__super__(config);\n      self.service.config.params = AWS.util.merge(self.service.config.params || {}, options.params);\n    }\n  },\n\n  /**\r\n   * @api private\r\n   */\n  makeServiceRequest: function makeServiceRequest(operation, params, callback) {\n    var self = this;\n    var request = self.service[operation](params);\n    self.setupRequest(request);\n    self.setupResponse(request);\n\n    if (typeof callback === 'function') {\n      request.send(callback);\n    }\n\n    return request;\n  },\n\n  /**\r\n   * @api private\r\n   */\n  serviceClientOperationsMap: {\n    batchGet: 'batchGetItem',\n    batchWrite: 'batchWriteItem',\n    delete: 'deleteItem',\n    get: 'getItem',\n    put: 'putItem',\n    query: 'query',\n    scan: 'scan',\n    update: 'updateItem',\n    transactGet: 'transactGetItems',\n    transactWrite: 'transactWriteItems'\n  },\n\n  /**\r\n   * Returns the attributes of one or more items from one or more tables\r\n   * by delegating to `AWS.DynamoDB.batchGetItem()`.\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.batchGetItem} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.batchGetItem\r\n   * @example Get items from multiple tables\r\n   *  var params = {\r\n   *    RequestItems: {\r\n   *      'Table-1': {\r\n   *        Keys: [\r\n   *          {\r\n   *             HashKey: 'haskey',\r\n   *             NumberRangeKey: 1\r\n   *          }\r\n   *        ]\r\n   *      },\r\n   *      'Table-2': {\r\n   *        Keys: [\r\n   *          { foo: 'bar' },\r\n   *        ]\r\n   *      }\r\n   *    }\r\n   *  };\r\n   *\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  documentClient.batchGet(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   *\r\n   */\n  batchGet: function batchGet(params, callback) {\n    var operation = this.serviceClientOperationsMap['batchGet'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\r\n   * Puts or deletes multiple items in one or more tables by delegating\r\n   * to `AWS.DynamoDB.batchWriteItem()`.\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.batchWriteItem} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.batchWriteItem\r\n   * @example Write to and delete from a table\r\n   *  var params = {\r\n   *    RequestItems: {\r\n   *      'Table-1': [\r\n   *        {\r\n   *          DeleteRequest: {\r\n   *            Key: { HashKey: 'someKey' }\r\n   *          }\r\n   *        },\r\n   *        {\r\n   *          PutRequest: {\r\n   *            Item: {\r\n   *              HashKey: 'anotherKey',\r\n   *              NumAttribute: 1,\r\n   *              BoolAttribute: true,\r\n   *              ListAttribute: [1, 'two', false],\r\n   *              MapAttribute: { foo: 'bar' }\r\n   *            }\r\n   *          }\r\n   *        }\r\n   *      ]\r\n   *    }\r\n   *  };\r\n   *\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  documentClient.batchWrite(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   *\r\n   */\n  batchWrite: function batchWrite(params, callback) {\n    var operation = this.serviceClientOperationsMap['batchWrite'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\r\n   * Deletes a single item in a table by primary key by delegating to\r\n   * `AWS.DynamoDB.deleteItem()`\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.deleteItem} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.deleteItem\r\n   * @example Delete an item from a table\r\n   *  var params = {\r\n   *    TableName : 'Table',\r\n   *    Key: {\r\n   *      HashKey: 'hashkey',\r\n   *      NumberRangeKey: 1\r\n   *    }\r\n   *  };\r\n   *\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  documentClient.delete(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   *\r\n   */\n  delete: function _delete(params, callback) {\n    var operation = this.serviceClientOperationsMap['delete'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\r\n   * Returns a set of attributes for the item with the given primary key\r\n   * by delegating to `AWS.DynamoDB.getItem()`.\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.getItem} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.getItem\r\n   * @example Get an item from a table\r\n   *  var params = {\r\n   *    TableName : 'Table',\r\n   *    Key: {\r\n   *      HashKey: 'hashkey'\r\n   *    }\r\n   *  };\r\n   *\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  documentClient.get(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   *\r\n   */\n  get: function get(params, callback) {\n    var operation = this.serviceClientOperationsMap['get'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\r\n   * Creates a new item, or replaces an old item with a new item by\r\n   * delegating to `AWS.DynamoDB.putItem()`.\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.putItem} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.putItem\r\n   * @example Create a new item in a table\r\n   *  var params = {\r\n   *    TableName : 'Table',\r\n   *    Item: {\r\n   *       HashKey: 'haskey',\r\n   *       NumAttribute: 1,\r\n   *       BoolAttribute: true,\r\n   *       ListAttribute: [1, 'two', false],\r\n   *       MapAttribute: { foo: 'bar'},\r\n   *       NullAttribute: null\r\n   *    }\r\n   *  };\r\n   *\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  documentClient.put(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   *\r\n   */\n  put: function put(params, callback) {\n    var operation = this.serviceClientOperationsMap['put'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\r\n   * Edits an existing item's attributes, or adds a new item to the table if\r\n   * it does not already exist by delegating to `AWS.DynamoDB.updateItem()`.\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.updateItem} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.updateItem\r\n   * @example Update an item with expressions\r\n   *  var params = {\r\n   *    TableName: 'Table',\r\n   *    Key: { HashKey : 'hashkey' },\r\n   *    UpdateExpression: 'set #a = :x + :y',\r\n   *    ConditionExpression: '#a < :MAX',\r\n   *    ExpressionAttributeNames: {'#a' : 'Sum'},\r\n   *    ExpressionAttributeValues: {\r\n   *      ':x' : 20,\r\n   *      ':y' : 45,\r\n   *      ':MAX' : 100,\r\n   *    }\r\n   *  };\r\n   *\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  documentClient.update(params, function(err, data) {\r\n   *     if (err) console.log(err);\r\n   *     else console.log(data);\r\n   *  });\r\n   *\r\n   */\n  update: function update(params, callback) {\n    var operation = this.serviceClientOperationsMap['update'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\r\n   * Returns one or more items and item attributes by accessing every item\r\n   * in a table or a secondary index.\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.scan} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.scan\r\n   * @example Scan the table with a filter expression\r\n   *  var params = {\r\n   *    TableName : 'Table',\r\n   *    FilterExpression : 'Year = :this_year',\r\n   *    ExpressionAttributeValues : {':this_year' : 2015}\r\n   *  };\r\n   *\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  documentClient.scan(params, function(err, data) {\r\n   *     if (err) console.log(err);\r\n   *     else console.log(data);\r\n   *  });\r\n   *\r\n   */\n  scan: function scan(params, callback) {\n    var operation = this.serviceClientOperationsMap['scan'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\r\n   * Directly access items from a table by primary key or a secondary index.\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.query} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.query\r\n   * @example Query an index\r\n   *  var params = {\r\n   *    TableName: 'Table',\r\n   *    IndexName: 'Index',\r\n   *    KeyConditionExpression: 'HashKey = :hkey and RangeKey > :rkey',\r\n   *    ExpressionAttributeValues: {\r\n   *      ':hkey': 'key',\r\n   *      ':rkey': 2015\r\n   *    }\r\n   *  };\r\n   *\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  documentClient.query(params, function(err, data) {\r\n   *     if (err) console.log(err);\r\n   *     else console.log(data);\r\n   *  });\r\n   *\r\n   */\n  query: function query(params, callback) {\n    var operation = this.serviceClientOperationsMap['query'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\r\n   * Synchronous write operation that groups up to 10 action requests\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.transactWriteItems} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.transactWriteItems\r\n   * @example Get items from multiple tables\r\n   *  var params = {\r\n   *    TransactItems: [{\r\n   *      Put: {\r\n   *        TableName : 'Table0',\r\n   *        Item: {\r\n   *          HashKey: 'haskey',\r\n   *          NumAttribute: 1,\r\n   *          BoolAttribute: true,\r\n   *          ListAttribute: [1, 'two', false],\r\n   *          MapAttribute: { foo: 'bar'},\r\n   *          NullAttribute: null\r\n   *        }\r\n   *      }\r\n   *    }, {\r\n   *      Update: {\r\n   *        TableName: 'Table1',\r\n   *        Key: { HashKey : 'hashkey' },\r\n   *        UpdateExpression: 'set #a = :x + :y',\r\n   *        ConditionExpression: '#a < :MAX',\r\n   *        ExpressionAttributeNames: {'#a' : 'Sum'},\r\n   *        ExpressionAttributeValues: {\r\n   *          ':x' : 20,\r\n   *          ':y' : 45,\r\n   *          ':MAX' : 100,\r\n   *        }\r\n   *      }\r\n   *    }]\r\n   *  };\r\n   *\r\n   *  documentClient.transactWrite(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   */\n  transactWrite: function transactWrite(params, callback) {\n    var operation = this.serviceClientOperationsMap['transactWrite'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\r\n   * Atomically retrieves multiple items from one or more tables (but not from indexes)\r\n   * in a single account and region.\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.transactGetItems} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.transactGetItems\r\n   * @example Get items from multiple tables\r\n   *  var params = {\r\n   *    TransactItems: [{\r\n   *      Get: {\r\n   *        TableName : 'Table0',\r\n   *        Key: {\r\n   *          HashKey: 'hashkey0'\r\n   *        }\r\n   *      }\r\n   *    }, {\r\n   *      Get: {\r\n   *        TableName : 'Table1',\r\n   *        Key: {\r\n   *          HashKey: 'hashkey1'\r\n   *        }\r\n   *      }\r\n   *    }]\r\n   *  };\r\n   *\r\n   *  documentClient.transactGet(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   */\n  transactGet: function transactGet(params, callback) {\n    var operation = this.serviceClientOperationsMap['transactGet'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\r\n   * Creates a set of elements inferring the type of set from\r\n   * the type of the first element. Amazon DynamoDB currently supports\r\n   * the number sets, string sets, and binary sets. For more information\r\n   * about DynamoDB data types see the documentation on the\r\n   * [Amazon DynamoDB Data Model](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DataModel.html#DataModel.DataTypes).\r\n   *\r\n   * @param list [Array] Collection to represent your DynamoDB Set\r\n   * @param options [map]\r\n   *  * **validate** [Boolean] set to true if you want to validate the type\r\n   *    of each element in the set. Defaults to `false`.\r\n   * @example Creating a number set\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  var params = {\r\n   *    Item: {\r\n   *      hashkey: 'hashkey'\r\n   *      numbers: documentClient.createSet([1, 2, 3]);\r\n   *    }\r\n   *  };\r\n   *\r\n   *  documentClient.put(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   *\r\n   */\n  createSet: function createSet(list, options) {\n    options = options || {};\n    return new DynamoDBSet(list, options);\n  },\n\n  /**\r\n   * @api private\r\n   */\n  getTranslator: function getTranslator() {\n    return new Translator(this.options);\n  },\n\n  /**\r\n   * @api private\r\n   */\n  setupRequest: function setupRequest(request) {\n    var self = this;\n    var translator = self.getTranslator();\n    var operation = request.operation;\n    var inputShape = request.service.api.operations[operation].input;\n\n    request._events.validate.unshift(function (req) {\n      req.rawParams = AWS.util.copy(req.params);\n      req.params = translator.translateInput(req.rawParams, inputShape);\n    });\n  },\n\n  /**\r\n   * @api private\r\n   */\n  setupResponse: function setupResponse(request) {\n    var self = this;\n    var translator = self.getTranslator();\n    var outputShape = self.service.api.operations[request.operation].output;\n    request.on('extractData', function (response) {\n      response.data = translator.translateOutput(response.data, outputShape);\n    });\n    var response = request.response;\n\n    response.nextPage = function (cb) {\n      var resp = this;\n      var req = resp.request;\n      var config;\n      var service = req.service;\n      var operation = req.operation;\n\n      try {\n        config = service.paginationConfig(operation, true);\n      } catch (e) {\n        resp.error = e;\n      }\n\n      if (!resp.hasNextPage()) {\n        if (cb) cb(resp.error, null);else if (resp.error) throw resp.error;\n        return null;\n      }\n\n      var params = AWS.util.copy(req.rawParams);\n\n      if (!resp.nextPageTokens) {\n        return cb ? cb(null, null) : null;\n      } else {\n        var inputTokens = config.inputToken;\n        if (typeof inputTokens === 'string') inputTokens = [inputTokens];\n\n        for (var i = 0; i < inputTokens.length; i++) {\n          params[inputTokens[i]] = resp.nextPageTokens[i];\n        }\n\n        return self[operation](params, cb);\n      }\n    };\n  }\n});\n/**\r\n * @api private\r\n */\n\nmodule.exports = AWS.DynamoDB.DocumentClient;","map":{"version":3,"sources":["C:/Users/Shutt/Documents/COMPX341/COMPX341-Assignment4/assets/node_modules/aws-sdk/lib/dynamodb/document_client.js"],"names":["AWS","require","Translator","DynamoDBSet","DynamoDB","DocumentClient","util","inherit","constructor","options","self","configure","service","bindServiceObject","attrValue","api","operations","putItem","input","members","Item","value","shape","config","copy","__super__","params","merge","makeServiceRequest","operation","callback","request","setupRequest","setupResponse","send","serviceClientOperationsMap","batchGet","batchWrite","delete","get","put","query","scan","update","transactGet","transactWrite","createSet","list","getTranslator","translator","inputShape","_events","validate","unshift","req","rawParams","translateInput","outputShape","output","on","response","data","translateOutput","nextPage","cb","resp","paginationConfig","e","error","hasNextPage","nextPageTokens","inputTokens","inputToken","i","length","module","exports"],"mappings":"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B;;AAiF7C;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACET,EAAAA,QAAQ,EAAE,kBAASV,MAAT,EAAiBI,QAAjB,EAA2B;AACnC,QAAID,SAAS,GAAG,KAAKM,0BAAL,CAAgC,UAAhC,CAAhB;AACA,WAAO,KAAKP,kBAAL,CAAwBC,SAAxB,EAAmCH,MAAnC,EAA2CI,QAA3C,CAAP;AACD,GAvH4C;;AAyH7C;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEO,EAAAA,UAAU,EAAE,oBAASX,MAAT,EAAiBI,QAAjB,EAA2B;AACrC,QAAID,SAAS,GAAG,KAAKM,0BAAL,CAAgC,YAAhC,CAAhB;AACA,WAAO,KAAKP,kBAAL,CAAwBC,SAAxB,EAAmCH,MAAnC,EAA2CI,QAA3C,CAAP;AACD,GApK4C;;AAsK7C;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEQ,EAAAA,MAAM,EAAE,iBAASZ,MAAT,EAAiBI,QAAjB,EAA2B;AACjC,QAAID,SAAS,GAAG,KAAKM,0BAAL,CAAgC,QAAhC,CAAhB;AACA,WAAO,KAAKP,kBAAL,CAAwBC,SAAxB,EAAmCH,MAAnC,EAA2CI,QAA3C,CAAP;AACD,GAlM4C;;AAoM7C;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACES,EAAAA,GAAG,EAAE,aAASb,MAAT,EAAiBI,QAAjB,EAA2B;AAC9B,QAAID,SAAS,GAAG,KAAKM,0BAAL,CAAgC,KAAhC,CAAhB;AACA,WAAO,KAAKP,kBAAL,CAAwBC,SAAxB,EAAmCH,MAAnC,EAA2CI,QAA3C,CAAP;AACD,GA/N4C;;AAiO7C;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEU,EAAAA,GAAG,EAAE,aAASd,MAAT,EAAiBI,QAAjB,EAA2B;AAC9B,QAAID,SAAS,GAAG,KAAKM,0BAAL,CAAgC,KAAhC,CAAhB;AACA,WAAO,KAAKP,kBAAL,CAAwBC,SAAxB,EAAmCH,MAAnC,EAA2CI,QAA3C,CAAP;AACD,GAjQ4C;;AAmQ7C;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEa,EAAAA,MAAM,EAAE,gBAASjB,MAAT,EAAiBI,QAAjB,EAA2B;AACjC,QAAID,SAAS,GAAG,KAAKM,0BAAL,CAAgC,QAAhC,CAAhB;AACA,WAAO,KAAKP,kBAAL,CAAwBC,SAAxB,EAAmCH,MAAnC,EAA2CI,QAA3C,CAAP;AACD,GApS4C;;AAsS7C;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEY,EAAAA,IAAI,EAAE,cAAShB,MAAT,EAAiBI,QAAjB,EAA2B;AAC/B,QAAID,SAAS,GAAG,KAAKM,0BAAL,CAAgC,MAAhC,CAAhB;AACA,WAAO,KAAKP,kBAAL,CAAwBC,SAAxB,EAAmCH,MAAnC,EAA2CI,QAA3C,CAAP;AACD,GAhU4C;;AAkU5C;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEW,EAAAA,KAAK,EAAE,eAASf,MAAT,EAAiBI,QAAjB,EAA2B;AAChC,QAAID,SAAS,GAAG,KAAKM,0BAAL,CAAgC,OAAhC,CAAhB;AACA,WAAO,KAAKP,kBAAL,CAAwBC,SAAxB,EAAmCH,MAAnC,EAA2CI,QAA3C,CAAP;AACD,GA/V4C;;AAiW7C;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEe,EAAAA,aAAa,EAAE,uBAASnB,MAAT,EAAiBI,QAAjB,EAA2B;AACxC,QAAID,SAAS,GAAG,KAAKM,0BAAL,CAAgC,eAAhC,CAAhB;AACA,WAAO,KAAKP,kBAAL,CAAwBC,SAAxB,EAAmCH,MAAnC,EAA2CI,QAA3C,CAAP;AACD,GA9Y4C;;AAgZ7C;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEc,EAAAA,WAAW,EAAE,qBAASlB,MAAT,EAAiBI,QAAjB,EAA2B;AACtC,QAAID,SAAS,GAAG,KAAKM,0BAAL,CAAgC,aAAhC,CAAhB;AACA,WAAO,KAAKP,kBAAL,CAAwBC,SAAxB,EAAmCH,MAAnC,EAA2CI,QAA3C,CAAP;AACD,GAnb4C;;AAqb7C;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEgB,EAAAA,SAAS,EAAE,mBAASC,IAAT,EAAetC,OAAf,EAAwB;AACjCA,IAAAA,OAAO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","sourcesContent":["var AWS = require('../core');\r\nvar Translator = require('./translator');\r\nvar DynamoDBSet = require('./set');\r\n\r\n/**\r\n * The document client simplifies working with items in Amazon DynamoDB\r\n * by abstracting away the notion of attribute values. This abstraction\r\n * annotates native JavaScript types supplied as input parameters, as well\r\n * as converts annotated response data to native JavaScript types.\r\n *\r\n * ## Marshalling Input and Unmarshalling Response Data\r\n *\r\n * The document client affords developers the use of native JavaScript types\r\n * instead of `AttributeValue`s to simplify the JavaScript development\r\n * experience with Amazon DynamoDB. JavaScript objects passed in as parameters\r\n * are marshalled into `AttributeValue` shapes required by Amazon DynamoDB.\r\n * Responses from DynamoDB are unmarshalled into plain JavaScript objects\r\n * by the `DocumentClient`. The `DocumentClient`, does not accept\r\n * `AttributeValue`s in favor of native JavaScript types.\r\n *\r\n * |                             JavaScript Type                            | DynamoDB AttributeValue |\r\n * |:----------------------------------------------------------------------:|-------------------------|\r\n * | String                                                                 | S                       |\r\n * | Number                                                                 | N                       |\r\n * | Boolean                                                                | BOOL                    |\r\n * | null                                                                   | NULL                    |\r\n * | Array                                                                  | L                       |\r\n * | Object                                                                 | M                       |\r\n * | Buffer, File, Blob, ArrayBuffer, DataView, and JavaScript typed arrays | B                       |\r\n *\r\n * ## Support for Sets\r\n *\r\n * The `DocumentClient` offers a convenient way to create sets from\r\n * JavaScript Arrays. The type of set is inferred from the first element\r\n * in the array. DynamoDB supports string, number, and binary sets. To\r\n * learn more about supported types see the\r\n * [Amazon DynamoDB Data Model Documentation](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DataModel.html)\r\n * For more information see {AWS.DynamoDB.DocumentClient.createSet}\r\n *\r\n */\r\nAWS.DynamoDB.DocumentClient = AWS.util.inherit({\r\n\r\n  /**\r\n   * Creates a DynamoDB document client with a set of configuration options.\r\n   *\r\n   * @option options params [map] An optional map of parameters to bind to every\r\n   *   request sent by this service object.\r\n   * @option options service [AWS.DynamoDB] An optional pre-configured instance\r\n   *  of the AWS.DynamoDB service object to use for requests. The object may\r\n   *  bound parameters used by the document client.\r\n   * @option options convertEmptyValues [Boolean] set to true if you would like\r\n   *  the document client to convert empty values (0-length strings, binary\r\n   *  buffers, and sets) to be converted to NULL types when persisting to\r\n   *  DynamoDB.\r\n   * @see AWS.DynamoDB.constructor\r\n   *\r\n   */\r\n  constructor: function DocumentClient(options) {\r\n    var self = this;\r\n    self.options = options || {};\r\n    self.configure(self.options);\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  configure: function configure(options) {\r\n    var self = this;\r\n    self.service = options.service;\r\n    self.bindServiceObject(options);\r\n    self.attrValue = options.attrValue =\r\n      self.service.api.operations.putItem.input.members.Item.value.shape;\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  bindServiceObject: function bindServiceObject(options) {\r\n    var self = this;\r\n    options = options || {};\r\n\r\n    if (!self.service) {\r\n      self.service = new AWS.DynamoDB(options);\r\n    } else {\r\n      var config = AWS.util.copy(self.service.config);\r\n      self.service = new self.service.constructor.__super__(config);\r\n      self.service.config.params =\r\n        AWS.util.merge(self.service.config.params || {}, options.params);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  makeServiceRequest: function(operation, params, callback) {\r\n    var self = this;\r\n    var request = self.service[operation](params);\r\n    self.setupRequest(request);\r\n    self.setupResponse(request);\r\n    if (typeof callback === 'function') {\r\n      request.send(callback);\r\n    }\r\n    return request;\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  serviceClientOperationsMap: {\r\n    batchGet: 'batchGetItem',\r\n    batchWrite: 'batchWriteItem',\r\n    delete: 'deleteItem',\r\n    get: 'getItem',\r\n    put: 'putItem',\r\n    query: 'query',\r\n    scan: 'scan',\r\n    update: 'updateItem',\r\n    transactGet: 'transactGetItems',\r\n    transactWrite: 'transactWriteItems'\r\n  },\r\n\r\n  /**\r\n   * Returns the attributes of one or more items from one or more tables\r\n   * by delegating to `AWS.DynamoDB.batchGetItem()`.\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.batchGetItem} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.batchGetItem\r\n   * @example Get items from multiple tables\r\n   *  var params = {\r\n   *    RequestItems: {\r\n   *      'Table-1': {\r\n   *        Keys: [\r\n   *          {\r\n   *             HashKey: 'haskey',\r\n   *             NumberRangeKey: 1\r\n   *          }\r\n   *        ]\r\n   *      },\r\n   *      'Table-2': {\r\n   *        Keys: [\r\n   *          { foo: 'bar' },\r\n   *        ]\r\n   *      }\r\n   *    }\r\n   *  };\r\n   *\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  documentClient.batchGet(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   *\r\n   */\r\n  batchGet: function(params, callback) {\r\n    var operation = this.serviceClientOperationsMap['batchGet'];\r\n    return this.makeServiceRequest(operation, params, callback);\r\n  },\r\n\r\n  /**\r\n   * Puts or deletes multiple items in one or more tables by delegating\r\n   * to `AWS.DynamoDB.batchWriteItem()`.\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.batchWriteItem} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.batchWriteItem\r\n   * @example Write to and delete from a table\r\n   *  var params = {\r\n   *    RequestItems: {\r\n   *      'Table-1': [\r\n   *        {\r\n   *          DeleteRequest: {\r\n   *            Key: { HashKey: 'someKey' }\r\n   *          }\r\n   *        },\r\n   *        {\r\n   *          PutRequest: {\r\n   *            Item: {\r\n   *              HashKey: 'anotherKey',\r\n   *              NumAttribute: 1,\r\n   *              BoolAttribute: true,\r\n   *              ListAttribute: [1, 'two', false],\r\n   *              MapAttribute: { foo: 'bar' }\r\n   *            }\r\n   *          }\r\n   *        }\r\n   *      ]\r\n   *    }\r\n   *  };\r\n   *\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  documentClient.batchWrite(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   *\r\n   */\r\n  batchWrite: function(params, callback) {\r\n    var operation = this.serviceClientOperationsMap['batchWrite'];\r\n    return this.makeServiceRequest(operation, params, callback);\r\n  },\r\n\r\n  /**\r\n   * Deletes a single item in a table by primary key by delegating to\r\n   * `AWS.DynamoDB.deleteItem()`\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.deleteItem} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.deleteItem\r\n   * @example Delete an item from a table\r\n   *  var params = {\r\n   *    TableName : 'Table',\r\n   *    Key: {\r\n   *      HashKey: 'hashkey',\r\n   *      NumberRangeKey: 1\r\n   *    }\r\n   *  };\r\n   *\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  documentClient.delete(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   *\r\n   */\r\n  delete: function(params, callback) {\r\n    var operation = this.serviceClientOperationsMap['delete'];\r\n    return this.makeServiceRequest(operation, params, callback);\r\n  },\r\n\r\n  /**\r\n   * Returns a set of attributes for the item with the given primary key\r\n   * by delegating to `AWS.DynamoDB.getItem()`.\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.getItem} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.getItem\r\n   * @example Get an item from a table\r\n   *  var params = {\r\n   *    TableName : 'Table',\r\n   *    Key: {\r\n   *      HashKey: 'hashkey'\r\n   *    }\r\n   *  };\r\n   *\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  documentClient.get(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   *\r\n   */\r\n  get: function(params, callback) {\r\n    var operation = this.serviceClientOperationsMap['get'];\r\n    return this.makeServiceRequest(operation, params, callback);\r\n  },\r\n\r\n  /**\r\n   * Creates a new item, or replaces an old item with a new item by\r\n   * delegating to `AWS.DynamoDB.putItem()`.\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.putItem} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.putItem\r\n   * @example Create a new item in a table\r\n   *  var params = {\r\n   *    TableName : 'Table',\r\n   *    Item: {\r\n   *       HashKey: 'haskey',\r\n   *       NumAttribute: 1,\r\n   *       BoolAttribute: true,\r\n   *       ListAttribute: [1, 'two', false],\r\n   *       MapAttribute: { foo: 'bar'},\r\n   *       NullAttribute: null\r\n   *    }\r\n   *  };\r\n   *\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  documentClient.put(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   *\r\n   */\r\n  put: function(params, callback) {\r\n    var operation = this.serviceClientOperationsMap['put'];\r\n    return this.makeServiceRequest(operation, params, callback);\r\n  },\r\n\r\n  /**\r\n   * Edits an existing item's attributes, or adds a new item to the table if\r\n   * it does not already exist by delegating to `AWS.DynamoDB.updateItem()`.\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.updateItem} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.updateItem\r\n   * @example Update an item with expressions\r\n   *  var params = {\r\n   *    TableName: 'Table',\r\n   *    Key: { HashKey : 'hashkey' },\r\n   *    UpdateExpression: 'set #a = :x + :y',\r\n   *    ConditionExpression: '#a < :MAX',\r\n   *    ExpressionAttributeNames: {'#a' : 'Sum'},\r\n   *    ExpressionAttributeValues: {\r\n   *      ':x' : 20,\r\n   *      ':y' : 45,\r\n   *      ':MAX' : 100,\r\n   *    }\r\n   *  };\r\n   *\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  documentClient.update(params, function(err, data) {\r\n   *     if (err) console.log(err);\r\n   *     else console.log(data);\r\n   *  });\r\n   *\r\n   */\r\n  update: function(params, callback) {\r\n    var operation = this.serviceClientOperationsMap['update'];\r\n    return this.makeServiceRequest(operation, params, callback);\r\n  },\r\n\r\n  /**\r\n   * Returns one or more items and item attributes by accessing every item\r\n   * in a table or a secondary index.\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.scan} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.scan\r\n   * @example Scan the table with a filter expression\r\n   *  var params = {\r\n   *    TableName : 'Table',\r\n   *    FilterExpression : 'Year = :this_year',\r\n   *    ExpressionAttributeValues : {':this_year' : 2015}\r\n   *  };\r\n   *\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  documentClient.scan(params, function(err, data) {\r\n   *     if (err) console.log(err);\r\n   *     else console.log(data);\r\n   *  });\r\n   *\r\n   */\r\n  scan: function(params, callback) {\r\n    var operation = this.serviceClientOperationsMap['scan'];\r\n    return this.makeServiceRequest(operation, params, callback);\r\n  },\r\n\r\n   /**\r\n    * Directly access items from a table by primary key or a secondary index.\r\n    *\r\n    * Supply the same parameters as {AWS.DynamoDB.query} with\r\n    * `AttributeValue`s substituted by native JavaScript types.\r\n    *\r\n    * @see AWS.DynamoDB.query\r\n    * @example Query an index\r\n    *  var params = {\r\n    *    TableName: 'Table',\r\n    *    IndexName: 'Index',\r\n    *    KeyConditionExpression: 'HashKey = :hkey and RangeKey > :rkey',\r\n    *    ExpressionAttributeValues: {\r\n    *      ':hkey': 'key',\r\n    *      ':rkey': 2015\r\n    *    }\r\n    *  };\r\n    *\r\n    *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n    *\r\n    *  documentClient.query(params, function(err, data) {\r\n    *     if (err) console.log(err);\r\n    *     else console.log(data);\r\n    *  });\r\n    *\r\n    */\r\n  query: function(params, callback) {\r\n    var operation = this.serviceClientOperationsMap['query'];\r\n    return this.makeServiceRequest(operation, params, callback);\r\n  },\r\n\r\n  /**\r\n   * Synchronous write operation that groups up to 10 action requests\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.transactWriteItems} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.transactWriteItems\r\n   * @example Get items from multiple tables\r\n   *  var params = {\r\n   *    TransactItems: [{\r\n   *      Put: {\r\n   *        TableName : 'Table0',\r\n   *        Item: {\r\n   *          HashKey: 'haskey',\r\n   *          NumAttribute: 1,\r\n   *          BoolAttribute: true,\r\n   *          ListAttribute: [1, 'two', false],\r\n   *          MapAttribute: { foo: 'bar'},\r\n   *          NullAttribute: null\r\n   *        }\r\n   *      }\r\n   *    }, {\r\n   *      Update: {\r\n   *        TableName: 'Table1',\r\n   *        Key: { HashKey : 'hashkey' },\r\n   *        UpdateExpression: 'set #a = :x + :y',\r\n   *        ConditionExpression: '#a < :MAX',\r\n   *        ExpressionAttributeNames: {'#a' : 'Sum'},\r\n   *        ExpressionAttributeValues: {\r\n   *          ':x' : 20,\r\n   *          ':y' : 45,\r\n   *          ':MAX' : 100,\r\n   *        }\r\n   *      }\r\n   *    }]\r\n   *  };\r\n   *\r\n   *  documentClient.transactWrite(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   */\r\n  transactWrite: function(params, callback) {\r\n    var operation = this.serviceClientOperationsMap['transactWrite'];\r\n    return this.makeServiceRequest(operation, params, callback);\r\n  },\r\n\r\n  /**\r\n   * Atomically retrieves multiple items from one or more tables (but not from indexes)\r\n   * in a single account and region.\r\n   *\r\n   * Supply the same parameters as {AWS.DynamoDB.transactGetItems} with\r\n   * `AttributeValue`s substituted by native JavaScript types.\r\n   *\r\n   * @see AWS.DynamoDB.transactGetItems\r\n   * @example Get items from multiple tables\r\n   *  var params = {\r\n   *    TransactItems: [{\r\n   *      Get: {\r\n   *        TableName : 'Table0',\r\n   *        Key: {\r\n   *          HashKey: 'hashkey0'\r\n   *        }\r\n   *      }\r\n   *    }, {\r\n   *      Get: {\r\n   *        TableName : 'Table1',\r\n   *        Key: {\r\n   *          HashKey: 'hashkey1'\r\n   *        }\r\n   *      }\r\n   *    }]\r\n   *  };\r\n   *\r\n   *  documentClient.transactGet(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   */\r\n  transactGet: function(params, callback) {\r\n    var operation = this.serviceClientOperationsMap['transactGet'];\r\n    return this.makeServiceRequest(operation, params, callback);\r\n  },\r\n\r\n  /**\r\n   * Creates a set of elements inferring the type of set from\r\n   * the type of the first element. Amazon DynamoDB currently supports\r\n   * the number sets, string sets, and binary sets. For more information\r\n   * about DynamoDB data types see the documentation on the\r\n   * [Amazon DynamoDB Data Model](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DataModel.html#DataModel.DataTypes).\r\n   *\r\n   * @param list [Array] Collection to represent your DynamoDB Set\r\n   * @param options [map]\r\n   *  * **validate** [Boolean] set to true if you want to validate the type\r\n   *    of each element in the set. Defaults to `false`.\r\n   * @example Creating a number set\r\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\r\n   *\r\n   *  var params = {\r\n   *    Item: {\r\n   *      hashkey: 'hashkey'\r\n   *      numbers: documentClient.createSet([1, 2, 3]);\r\n   *    }\r\n   *  };\r\n   *\r\n   *  documentClient.put(params, function(err, data) {\r\n   *    if (err) console.log(err);\r\n   *    else console.log(data);\r\n   *  });\r\n   *\r\n   */\r\n  createSet: function(list, options) {\r\n    options = options || {};\r\n    return new DynamoDBSet(list, options);\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  getTranslator: function() {\r\n    return new Translator(this.options);\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  setupRequest: function setupRequest(request) {\r\n    var self = this;\r\n    var translator = self.getTranslator();\r\n    var operation = request.operation;\r\n    var inputShape = request.service.api.operations[operation].input;\r\n    request._events.validate.unshift(function(req) {\r\n      req.rawParams = AWS.util.copy(req.params);\r\n      req.params = translator.translateInput(req.rawParams, inputShape);\r\n    });\r\n  },\r\n\r\n  /**\r\n   * @api private\r\n   */\r\n  setupResponse: function setupResponse(request) {\r\n    var self = this;\r\n    var translator = self.getTranslator();\r\n    var outputShape = self.service.api.operations[request.operation].output;\r\n    request.on('extractData', function(response) {\r\n      response.data = translator.translateOutput(response.data, outputShape);\r\n    });\r\n\r\n    var response = request.response;\r\n    response.nextPage = function(cb) {\r\n      var resp = this;\r\n      var req = resp.request;\r\n      var config;\r\n      var service = req.service;\r\n      var operation = req.operation;\r\n      try {\r\n        config = service.paginationConfig(operation, true);\r\n      } catch (e) { resp.error = e; }\r\n\r\n      if (!resp.hasNextPage()) {\r\n        if (cb) cb(resp.error, null);\r\n        else if (resp.error) throw resp.error;\r\n        return null;\r\n      }\r\n\r\n      var params = AWS.util.copy(req.rawParams);\r\n      if (!resp.nextPageTokens) {\r\n        return cb ? cb(null, null) : null;\r\n      } else {\r\n        var inputTokens = config.inputToken;\r\n        if (typeof inputTokens === 'string') inputTokens = [inputTokens];\r\n        for (var i = 0; i < inputTokens.length; i++) {\r\n          params[inputTokens[i]] = resp.nextPageTokens[i];\r\n        }\r\n        return self[operation](params, cb);\r\n      }\r\n    };\r\n  }\r\n\r\n});\r\n\r\n/**\r\n * @api private\r\n */\r\nmodule.exports = AWS.DynamoDB.DocumentClient;\r\n"]},"metadata":{},"sourceType":"script"}