{"ast":null,"code":"function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\r\n * Copyright (c) 2015-present, Facebook, Inc.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n *  strict\r\n */\n\n\nimport { visit, visitWithTypeInfo } from '../language/visitor';\nimport { Kind } from '../language/kinds';\nimport { TypeInfo } from '../utilities/TypeInfo';\n/**\r\n * An instance of this class is passed as the \"this\" context to all validators,\r\n * allowing access to commonly useful contextual information from within a\r\n * validation rule.\r\n */\n\nexport var ASTValidationContext = /*#__PURE__*/function () {\n  function ASTValidationContext(ast) {\n    _defineProperty(this, \"_ast\", void 0);\n\n    _defineProperty(this, \"_errors\", void 0);\n\n    this._ast = ast;\n    this._errors = [];\n  }\n\n  var _proto = ASTValidationContext.prototype;\n\n  _proto.reportError = function reportError(error) {\n    this._errors.push(error);\n  };\n\n  _proto.getErrors = function getErrors() {\n    return this._errors;\n  };\n\n  _proto.getDocument = function getDocument() {\n    return this._ast;\n  };\n\n  return ASTValidationContext;\n}();\nexport var SDLValidationContext = /*#__PURE__*/function (_ASTValidationContext) {\n  _inheritsLoose(SDLValidationContext, _ASTValidationContext);\n\n  function SDLValidationContext(ast, schema) {\n    var _this;\n\n    _this = _ASTValidationContext.call(this, ast) || this;\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_schema\", void 0);\n\n    _this._schema = schema;\n    return _this;\n  }\n\n  var _proto2 = SDLValidationContext.prototype;\n\n  _proto2.getSchema = function getSchema() {\n    return this._schema;\n  };\n\n  return SDLValidationContext;\n}(ASTValidationContext);\nexport var ValidationContext = /*#__PURE__*/function (_ASTValidationContext2) {\n  _inheritsLoose(ValidationContext, _ASTValidationContext2);\n\n  function ValidationContext(schema, ast, typeInfo) {\n    var _this2;\n\n    _this2 = _ASTValidationContext2.call(this, ast) || this;\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this2)), \"_schema\", void 0);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this2)), \"_typeInfo\", void 0);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this2)), \"_fragments\", void 0);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this2)), \"_fragmentSpreads\", void 0);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this2)), \"_recursivelyReferencedFragments\", void 0);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this2)), \"_variableUsages\", void 0);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this2)), \"_recursiveVariableUsages\", void 0);\n\n    _this2._schema = schema;\n    _this2._typeInfo = typeInfo;\n    _this2._fragmentSpreads = new Map();\n    _this2._recursivelyReferencedFragments = new Map();\n    _this2._variableUsages = new Map();\n    _this2._recursiveVariableUsages = new Map();\n    return _this2;\n  }\n\n  var _proto3 = ValidationContext.prototype;\n\n  _proto3.getSchema = function getSchema() {\n    return this._schema;\n  };\n\n  _proto3.getFragment = function getFragment(name) {\n    var fragments = this._fragments;\n\n    if (!fragments) {\n      this._fragments = fragments = this.getDocument().definitions.reduce(function (frags, statement) {\n        if (statement.kind === Kind.FRAGMENT_DEFINITION) {\n          frags[statement.name.value] = statement;\n        }\n\n        return frags;\n      }, Object.create(null));\n    }\n\n    return fragments[name];\n  };\n\n  _proto3.getFragmentSpreads = function getFragmentSpreads(node) {\n    var spreads = this._fragmentSpreads.get(node);\n\n    if (!spreads) {\n      spreads = [];\n      var setsToVisit = [node];\n\n      while (setsToVisit.length !== 0) {\n        var set = setsToVisit.pop();\n\n        for (var i = 0; i < set.selections.length; i++) {\n          var selection = set.selections[i];\n\n          if (selection.kind === Kind.FRAGMENT_SPREAD) {\n            spreads.push(selection);\n          } else if (selection.selectionSet) {\n            setsToVisit.push(selection.selectionSet);\n          }\n        }\n      }\n\n      this._fragmentSpreads.set(node, spreads);\n    }\n\n    return spreads;\n  };\n\n  _proto3.getRecursivelyReferencedFragments = function getRecursivelyReferencedFragments(operation) {\n    var fragments = this._recursivelyReferencedFragments.get(operation);\n\n    if (!fragments) {\n      fragments = [];\n      var collectedNames = Object.create(null);\n      var nodesToVisit = [operation.selectionSet];\n\n      while (nodesToVisit.length !== 0) {\n        var node = nodesToVisit.pop();\n        var spreads = this.getFragmentSpreads(node);\n\n        for (var i = 0; i < spreads.length; i++) {\n          var fragName = spreads[i].name.value;\n\n          if (collectedNames[fragName] !== true) {\n            collectedNames[fragName] = true;\n            var fragment = this.getFragment(fragName);\n\n            if (fragment) {\n              fragments.push(fragment);\n              nodesToVisit.push(fragment.selectionSet);\n            }\n          }\n        }\n      }\n\n      this._recursivelyReferencedFragments.set(operation, fragments);\n    }\n\n    return fragments;\n  };\n\n  _proto3.getVariableUsages = function getVariableUsages(node) {\n    var usages = this._variableUsages.get(node);\n\n    if (!usages) {\n      var newUsages = [];\n      var typeInfo = new TypeInfo(this._schema);\n      visit(node, visitWithTypeInfo(typeInfo, {\n        VariableDefinition: function VariableDefinition() {\n          return false;\n        },\n        Variable: function Variable(variable) {\n          newUsages.push({\n            node: variable,\n            type: typeInfo.getInputType(),\n            defaultValue: typeInfo.getDefaultValue()\n          });\n        }\n      }));\n      usages = newUsages;\n\n      this._variableUsages.set(node, usages);\n    }\n\n    return usages;\n  };\n\n  _proto3.getRecursiveVariableUsages = function getRecursiveVariableUsages(operation) {\n    var usages = this._recursiveVariableUsages.get(operation);\n\n    if (!usages) {\n      usages = this.getVariableUsages(operation);\n      var fragments = this.getRecursivelyReferencedFragments(operation);\n\n      for (var i = 0; i < fragments.length; i++) {\n        Array.prototype.push.apply(usages, this.getVariableUsages(fragments[i]));\n      }\n\n      this._recursiveVariableUsages.set(operation, usages);\n    }\n\n    return usages;\n  };\n\n  _proto3.getType = function getType() {\n    return this._typeInfo.getType();\n  };\n\n  _proto3.getParentType = function getParentType() {\n    return this._typeInfo.getParentType();\n  };\n\n  _proto3.getInputType = function getInputType() {\n    return this._typeInfo.getInputType();\n  };\n\n  _proto3.getParentInputType = function getParentInputType() {\n    return this._typeInfo.getParentInputType();\n  };\n\n  _proto3.getFieldDef = function getFieldDef() {\n    return this._typeInfo.getFieldDef();\n  };\n\n  _proto3.getDirective = function getDirective() {\n    return this._typeInfo.getDirective();\n  };\n\n  _proto3.getArgument = function getArgument() {\n    return this._typeInfo.getArgument();\n  };\n\n  return ValidationContext;\n}(ASTValidationContext);","map":{"version":3,"sources":["C:/Users/Shutt/Documents/COMPX341/COMPX341-Assignment4/assets/node_modules/@aws-amplify/api/node_modules/graphql/validation/ValidationContext.mjs"],"names":["_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","_assertThisInitialized","self","ReferenceError","_defineProperty","obj","key","value","defineProperty","enumerable","configurable","writable","visit","visitWithTypeInfo","Kind","TypeInfo","ASTValidationContext","ast","_ast","_errors","_proto","reportError","error","push","getErrors","getDocument","SDLValidationContext","_ASTValidationContext","schema","_this","call","_schema","_proto2","getSchema","ValidationContext","_ASTValidationContext2","typeInfo","_this2","_typeInfo","_fragmentSpreads","Map","_recursivelyReferencedFragments","_variableUsages","_recursiveVariableUsages","_proto3","getFragment","name","fragments","_fragments","definitions","reduce","frags","statement","kind","FRAGMENT_DEFINITION","getFragmentSpreads","node","spreads","get","setsToVisit","length","set","pop","i","selections","selection","FRAGMENT_SPREAD","selectionSet","getRecursivelyReferencedFragments","operation","collectedNames","nodesToVisit","fragName","fragment","getVariableUsages","usages","newUsages","VariableDefinition","Variable","variable","type","getInputType","defaultValue","getDefaultValue","getRecursiveVariableUsages","Array","apply","getType","getParentType","getParentInputType","getFieldDef","getDirective","getArgument"],"mappings":"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","sourcesContent":["function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\r\n\r\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\r\n\r\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\r\n\r\n/**\r\n * Copyright (c) 2015-present, Facebook, Inc.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n *  strict\r\n */\r\nimport { visit, visitWithTypeInfo } from '../language/visitor';\r\nimport { Kind } from '../language/kinds';\r\nimport { TypeInfo } from '../utilities/TypeInfo';\r\n\r\n/**\r\n * An instance of this class is passed as the \"this\" context to all validators,\r\n * allowing access to commonly useful contextual information from within a\r\n * validation rule.\r\n */\r\nexport var ASTValidationContext =\r\n/*#__PURE__*/\r\nfunction () {\r\n  function ASTValidationContext(ast) {\r\n    _defineProperty(this, \"_ast\", void 0);\r\n\r\n    _defineProperty(this, \"_errors\", void 0);\r\n\r\n    this._ast = ast;\r\n    this._errors = [];\r\n  }\r\n\r\n  var _proto = ASTValidationContext.prototype;\r\n\r\n  _proto.reportError = function reportError(error) {\r\n    this._errors.push(error);\r\n  };\r\n\r\n  _proto.getErrors = function getErrors() {\r\n    return this._errors;\r\n  };\r\n\r\n  _proto.getDocument = function getDocument() {\r\n    return this._ast;\r\n  };\r\n\r\n  return ASTValidationContext;\r\n}();\r\nexport var SDLValidationContext =\r\n/*#__PURE__*/\r\nfunction (_ASTValidationContext) {\r\n  _inheritsLoose(SDLValidationContext, _ASTValidationContext);\r\n\r\n  function SDLValidationContext(ast, schema) {\r\n    var _this;\r\n\r\n    _this = _ASTValidationContext.call(this, ast) || this;\r\n\r\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_schema\", void 0);\r\n\r\n    _this._schema = schema;\r\n    return _this;\r\n  }\r\n\r\n  var _proto2 = SDLValidationContext.prototype;\r\n\r\n  _proto2.getSchema = function getSchema() {\r\n    return this._schema;\r\n  };\r\n\r\n  return SDLValidationContext;\r\n}(ASTValidationContext);\r\nexport var ValidationContext =\r\n/*#__PURE__*/\r\nfunction (_ASTValidationContext2) {\r\n  _inheritsLoose(ValidationContext, _ASTValidationContext2);\r\n\r\n  function ValidationContext(schema, ast, typeInfo) {\r\n    var _this2;\r\n\r\n    _this2 = _ASTValidationContext2.call(this, ast) || this;\r\n\r\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this2)), \"_schema\", void 0);\r\n\r\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this2)), \"_typeInfo\", void 0);\r\n\r\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this2)), \"_fragments\", void 0);\r\n\r\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this2)), \"_fragmentSpreads\", void 0);\r\n\r\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this2)), \"_recursivelyReferencedFragments\", void 0);\r\n\r\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this2)), \"_variableUsages\", void 0);\r\n\r\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this2)), \"_recursiveVariableUsages\", void 0);\r\n\r\n    _this2._schema = schema;\r\n    _this2._typeInfo = typeInfo;\r\n    _this2._fragmentSpreads = new Map();\r\n    _this2._recursivelyReferencedFragments = new Map();\r\n    _this2._variableUsages = new Map();\r\n    _this2._recursiveVariableUsages = new Map();\r\n    return _this2;\r\n  }\r\n\r\n  var _proto3 = ValidationContext.prototype;\r\n\r\n  _proto3.getSchema = function getSchema() {\r\n    return this._schema;\r\n  };\r\n\r\n  _proto3.getFragment = function getFragment(name) {\r\n    var fragments = this._fragments;\r\n\r\n    if (!fragments) {\r\n      this._fragments = fragments = this.getDocument().definitions.reduce(function (frags, statement) {\r\n        if (statement.kind === Kind.FRAGMENT_DEFINITION) {\r\n          frags[statement.name.value] = statement;\r\n        }\r\n\r\n        return frags;\r\n      }, Object.create(null));\r\n    }\r\n\r\n    return fragments[name];\r\n  };\r\n\r\n  _proto3.getFragmentSpreads = function getFragmentSpreads(node) {\r\n    var spreads = this._fragmentSpreads.get(node);\r\n\r\n    if (!spreads) {\r\n      spreads = [];\r\n      var setsToVisit = [node];\r\n\r\n      while (setsToVisit.length !== 0) {\r\n        var set = setsToVisit.pop();\r\n\r\n        for (var i = 0; i < set.selections.length; i++) {\r\n          var selection = set.selections[i];\r\n\r\n          if (selection.kind === Kind.FRAGMENT_SPREAD) {\r\n            spreads.push(selection);\r\n          } else if (selection.selectionSet) {\r\n            setsToVisit.push(selection.selectionSet);\r\n          }\r\n        }\r\n      }\r\n\r\n      this._fragmentSpreads.set(node, spreads);\r\n    }\r\n\r\n    return spreads;\r\n  };\r\n\r\n  _proto3.getRecursivelyReferencedFragments = function getRecursivelyReferencedFragments(operation) {\r\n    var fragments = this._recursivelyReferencedFragments.get(operation);\r\n\r\n    if (!fragments) {\r\n      fragments = [];\r\n      var collectedNames = Object.create(null);\r\n      var nodesToVisit = [operation.selectionSet];\r\n\r\n      while (nodesToVisit.length !== 0) {\r\n        var node = nodesToVisit.pop();\r\n        var spreads = this.getFragmentSpreads(node);\r\n\r\n        for (var i = 0; i < spreads.length; i++) {\r\n          var fragName = spreads[i].name.value;\r\n\r\n          if (collectedNames[fragName] !== true) {\r\n            collectedNames[fragName] = true;\r\n            var fragment = this.getFragment(fragName);\r\n\r\n            if (fragment) {\r\n              fragments.push(fragment);\r\n              nodesToVisit.push(fragment.selectionSet);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      this._recursivelyReferencedFragments.set(operation, fragments);\r\n    }\r\n\r\n    return fragments;\r\n  };\r\n\r\n  _proto3.getVariableUsages = function getVariableUsages(node) {\r\n    var usages = this._variableUsages.get(node);\r\n\r\n    if (!usages) {\r\n      var newUsages = [];\r\n      var typeInfo = new TypeInfo(this._schema);\r\n      visit(node, visitWithTypeInfo(typeInfo, {\r\n        VariableDefinition: function VariableDefinition() {\r\n          return false;\r\n        },\r\n        Variable: function Variable(variable) {\r\n          newUsages.push({\r\n            node: variable,\r\n            type: typeInfo.getInputType(),\r\n            defaultValue: typeInfo.getDefaultValue()\r\n          });\r\n        }\r\n      }));\r\n      usages = newUsages;\r\n\r\n      this._variableUsages.set(node, usages);\r\n    }\r\n\r\n    return usages;\r\n  };\r\n\r\n  _proto3.getRecursiveVariableUsages = function getRecursiveVariableUsages(operation) {\r\n    var usages = this._recursiveVariableUsages.get(operation);\r\n\r\n    if (!usages) {\r\n      usages = this.getVariableUsages(operation);\r\n      var fragments = this.getRecursivelyReferencedFragments(operation);\r\n\r\n      for (var i = 0; i < fragments.length; i++) {\r\n        Array.prototype.push.apply(usages, this.getVariableUsages(fragments[i]));\r\n      }\r\n\r\n      this._recursiveVariableUsages.set(operation, usages);\r\n    }\r\n\r\n    return usages;\r\n  };\r\n\r\n  _proto3.getType = function getType() {\r\n    return this._typeInfo.getType();\r\n  };\r\n\r\n  _proto3.getParentType = function getParentType() {\r\n    return this._typeInfo.getParentType();\r\n  };\r\n\r\n  _proto3.getInputType = function getInputType() {\r\n    return this._typeInfo.getInputType();\r\n  };\r\n\r\n  _proto3.getParentInputType = function getParentInputType() {\r\n    return this._typeInfo.getParentInputType();\r\n  };\r\n\r\n  _proto3.getFieldDef = function getFieldDef() {\r\n    return this._typeInfo.getFieldDef();\r\n  };\r\n\r\n  _proto3.getDirective = function getDirective() {\r\n    return this._typeInfo.getDirective();\r\n  };\r\n\r\n  _proto3.getArgument = function getArgument() {\r\n    return this._typeInfo.getArgument();\r\n  };\r\n\r\n  return ValidationContext;\r\n}(ASTValidationContext);"]},"metadata":{},"sourceType":"module"}